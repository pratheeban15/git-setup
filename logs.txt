Environment: stage2
: Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager[0]
      User profile is available. Using '/home/titan/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager[58]
      Creating key {7229d595-9105-40c6-9ad6-327e59531a78} with creation date 2019-10-19 11:49:22Z, activation date 2019-10-19 11:49:22Z, and expiration date 2020-01-17 11:49:22Z.
[40m[1m[33mwarn[39m[22m[49m: Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager[35]
      No XML encryptor configured. Key {7229d595-9105-40c6-9ad6-327e59531a78} may be persisted to storage in unencrypted form.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.DataProtection.Repositories.FileSystemXmlRepository[39]
      Writing data to file '/home/titan/.aspnet/DataProtection-Keys/key-7229d595-9105-40c6-9ad6-327e59531a78.xml'.
Hosting environment: stage2
Content root path: /app
Now listening on: http://[::]:8080
Application started. Press Ctrl+C to shut down.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571486124,"nbf":1571484324,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Y0RSc3FRTzduSjJEZzlsRkVGb3Q2RUhiNlUzeHk2WldTNGhnREdnakxCZjRnemNHaFl1Y3R0SGt5N2ZCU3RVOA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571484324}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IOrganizationManagerService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-orgmanager-service:8080/api/applications/clients/4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IOrganizationManagerService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-orgmanager-service:8080/api/applications/clients/4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 3792.8702ms 400 application/json
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571486118,"nbf":1571484318,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"aP0ugTMIjA6o-w","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571484318}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IOrganizationManagerService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-orgmanager-service:8080/api/applications/clients/4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IOrganizationManagerService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-orgmanager-service:8080/api/applications/clients/4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/devices/89716/schedules application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571486118,"nbf":1571484318,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"aP0ugTMIjA6o-w","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571484318}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devices/89716/schedules
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IOrganizationManagerService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-orgmanager-service:8080/api/applications/clients/4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IOrganizationManagerService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-orgmanager-service:8080/api/applications/clients/4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 PUT http://apigateway2.stage.resideo.com/api/devices/89716/control application/json; charset=utf-8,application/json; charset=utf-8 108
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571486118,"nbf":1571484318,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"aP0ugTMIjA6o-w","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571484318}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devices/89716/control
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IOrganizationManagerService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-orgmanager-service:8080/api/applications/clients/4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IOrganizationManagerService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-orgmanager-service:8080/api/applications/clients/4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IOrganizationManagerService.ClientHandler[101]
      Received HTTP response after 3761.1949ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IOrganizationManagerService.ClientHandler[101]
      Received HTTP response after 3295.4563ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IOrganizationManagerService.LogicalHandler[101]
      End processing HTTP request after 3767.6991ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IOrganizationManagerService.LogicalHandler[101]
      End processing HTTP request after 3301.7684ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devices/89716/schedules, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 1816.4686ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 1816.8422ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/devices/89716/schedules
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89716/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89716/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 1870.4828ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 1870.8146ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      List of location for the user
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 161.3683ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 161.7373ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 111.619ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 112.0918ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      aclIds is 236876,237212,237213,237214,237215,237218,237222
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3R2:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3R3:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/devices/{everything}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R3:00000001, previousRequestId: no previous request id, message: /api/devices/89716/schedules is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R2:00000001, previousRequestId: no previous request id, message: /api/locations is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R3:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/devices/89716/schedules
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R2:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R3:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R2:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R3:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R2:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R2:00000001, previousRequestId: no previous request id, message: /api/locations route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R3:00000001, previousRequestId: no previous request id, message: /api/devices/{everything} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IOrganizationManagerService.ClientHandler[101]
      Received HTTP response after 3488.4385ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IOrganizationManagerService.LogicalHandler[101]
      End processing HTTP request after 3488.7945ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devices/89716/control, , PUT
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 15.1352ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 15.406ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/devices/89716/control
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89716/E
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89716/E
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 88.8306ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 89.1072ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3R4:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/devices/{deviceId}/control
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R4:00000001, previousRequestId: no previous request id, message: /api/devices/89716/control is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R4:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/devices/89716/control
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R4:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R4:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R4:00000001, previousRequestId: no previous request id, message: /api/devices/{deviceId}/control route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 9919.7077ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling Via Query Parameters.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 11579.4129ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 11699.3137ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237215/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571486118,"nbf":1571484318,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"aP0ugTMIjA6o-w","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571484318}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237215/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237215/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.9485ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.2548ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237215/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237215/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237215/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 9.6696ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 9.9222ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3R2:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R2:00000002, previousRequestId: no previous request id, message: /api/locations/237215/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R2:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237215/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R2:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R2:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R2:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 175.7618ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237222/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571486118,"nbf":1571484318,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"aP0ugTMIjA6o-w","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571484318}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237222/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237222/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.7594ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.0129ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237222/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237222/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237222/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.5458ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.8ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3R3:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R3:00000002, previousRequestId: no previous request id, message: /api/locations/237222/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R3:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237222/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R3:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R3:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R3:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 43.7687ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571486124,"nbf":1571484324,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Y0RSc3FRTzduSjJEZzlsRkVGb3Q2RUhiNlUzeHk2WldTNGhnREdnakxCZjRnemNHaFl1Y3R0SGt5N2ZCU3RVOA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571484324}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.3115ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.6375ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.7786ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.0548ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3R1:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R1:00000002, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R1:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R1:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R1:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R1:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2063.7882ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571486118,"nbf":1571484318,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"aP0ugTMIjA6o-w","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571484318}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.8216ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.1891ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.1757ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.4739ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000001, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1927.7959ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 POST http://apigateway2.stage.resideo.com/api/notifications/push/subscribe application/json; charset=utf-8 105
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/notifications/push/subscribe
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/notifications/push/subscribe, , POST
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3R6:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/pushnotification/subscribe
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R6:00000001, previousRequestId: no previous request id, message: /api/notifications/push/subscribe is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R6:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/notifications/push/subscribe
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R6:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R6:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R6:00000001, previousRequestId: no previous request id, message: /api/pushnotification/subscribe route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/234156/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/234156/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/234156/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233494/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233494/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233494/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 18.5713ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 18.8921ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 31.3244ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 31.7ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233494/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233494/R
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233494/R
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/234156/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/234156/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/234156/R
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233667/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233667/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233667/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.8435ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.2315ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233495/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 5.7392ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 6.0872ms - OK
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3R8:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R8:00000001, previousRequestId: no previous request id, message: /api/locations/233494/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R8:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233494/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R8:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233495/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R8:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R8:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3R7:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R7:00000001, previousRequestId: no previous request id, message: /api/locations/234156/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R7:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/234156/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R7:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233495/devices/info, , GET
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R7:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R7:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233662/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233662/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233662/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.5512ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.8576ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233667/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233667/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233667/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.7336ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.0718ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233495/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233495/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233495/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.668ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.9964ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.993ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.3427ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3R9:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R9:00000001, previousRequestId: no previous request id, message: /api/locations/233667/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R9:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233667/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R9:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R9:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R9:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RA:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RA:00000001, previousRequestId: no previous request id, message: /api/locations/233495/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RA:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233495/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RA:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RA:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RA:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 15.4877ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 15.7911ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233662/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233662/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233662/R
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 56.5285ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 41.5006ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 38.3304ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 107.5214ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 113.8741ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 114.2126ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RB:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RB:00000001, previousRequestId: no previous request id, message: /api/locations/233662/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RB:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233662/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RB:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RB:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RB:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 152.8683ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 5721.7155ms 201 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 14.0449ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 14.3438ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.4449ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.7567ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3R6:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R6:00000002, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R6:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R6:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R6:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R6:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2435.3791ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571486124,"nbf":1571484324,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Y0RSc3FRTzduSjJEZzlsRkVGb3Q2RUhiNlUzeHk2WldTNGhnREdnakxCZjRnemNHaFl1Y3R0SGt5N2ZCU3RVOA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571484324}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.4993ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.7392ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.2196ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.4409ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3R1:00000003, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R1:00000003, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R1:00000003, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R1:00000003, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R1:00000003, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R1:00000003, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 867.5159ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571486118,"nbf":1571484318,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"aP0ugTMIjA6o-w","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571484318}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.537ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.9594ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.4813ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.0068ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000002, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1551.005ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 15.5058ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 15.8217ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 5.7052ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.9739ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3R6:00000003, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R6:00000003, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R6:00000003, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R6:00000003, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R6:00000003, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R6:00000003, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1821.3491ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.7193ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.9835ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      List of location for the user
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 24.5522ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 24.8157ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      aclIds is 236876,237212,237213,237214,237215,237218,237222
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000003, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000003, previousRequestId: no previous request id, message: /api/locations is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000003, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000003, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000003, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000003, previousRequestId: no previous request id, message: /api/locations route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling Via Query Parameters.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 61.4693ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237212/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237212/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237212/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.5044ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.8967ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237212/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237212/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237212/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 5.2319ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.5619ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000004, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000004, previousRequestId: no previous request id, message: /api/locations/237212/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000004, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237212/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000004, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000004, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000004, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 42.0783ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237213/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237213/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237213/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 14.4744ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 14.7492ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237213/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237213/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237213/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.578ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.8135ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RC:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RC:00000001, previousRequestId: no previous request id, message: /api/locations/237213/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RC:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237213/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RC:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RC:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RC:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 42.4155ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237218/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237218/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237218/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.1377ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.4437ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237218/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237218/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237218/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 5.0447ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.3351ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000005, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000005, previousRequestId: no previous request id, message: /api/locations/237218/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000005, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237218/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000005, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000005, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000005, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 40.2782ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.7188ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.0159ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.8457ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.0758ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RD:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RD:00000001, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RD:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RD:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RD:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RD:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1327.8982ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237212/notifications/groups application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237212/notifications/groups
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237212/notifications/groups, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 14.1476ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 14.4359ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237212/notifications/groups
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237212/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237212/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 6.7144ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 7.0432ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RC:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/notificationgroups/locations/{locationId}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RC:00000002, previousRequestId: no previous request id, message: /api/locations/237212/notifications/groups is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RC:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237212/notifications/groups
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RC:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RC:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RC:00000002, previousRequestId: no previous request id, message: /api/notificationgroups/locations/{locationId} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571486124,"nbf":1571484324,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Y0RSc3FRTzduSjJEZzlsRkVGb3Q2RUhiNlUzeHk2WldTNGhnREdnakxCZjRnemNHaFl1Y3R0SGt5N2ZCU3RVOA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571484324}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.1283ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.4196ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 5.0381ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.3422ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3R1:00000004, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R1:00000004, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R1:00000004, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R1:00000004, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R1:00000004, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R1:00000004, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1352.5539ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1205.761ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237215/notifications/groups application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237215/notifications/groups
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237215/notifications/groups, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.9018ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.327ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237215/notifications/groups
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237215/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237215/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.8967ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.2802ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RE:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/notificationgroups/locations/{locationId}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RE:00000001, previousRequestId: no previous request id, message: /api/locations/237215/notifications/groups is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RE:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237215/notifications/groups
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RE:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RE:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RE:00000001, previousRequestId: no previous request id, message: /api/notificationgroups/locations/{locationId} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 35.2787ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237218/notifications/groups application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237218/notifications/groups
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237218/notifications/groups, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.3781ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.7821ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237218/notifications/groups
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237218/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237218/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.2862ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.7148ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RF:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/notificationgroups/locations/{locationId}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RF:00000001, previousRequestId: no previous request id, message: /api/locations/237218/notifications/groups is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RF:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237218/notifications/groups
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RF:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RF:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RF:00000001, previousRequestId: no previous request id, message: /api/notificationgroups/locations/{locationId} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 32.1845ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/236876/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/236876/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/236876/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.6155ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.9066ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/236876/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/236876/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/236876/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.7801ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.0536ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RE:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RE:00000002, previousRequestId: no previous request id, message: /api/locations/236876/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RE:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/236876/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RE:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RE:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RE:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1492.2186ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/devicetypes/homes.d.storm_variant1/events application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devicetypes/homes.d.storm_variant1/events
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devicetypes/homes.d.storm_variant1/events, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000006, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/devicetypes/{everything}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000006, previousRequestId: no previous request id, message: /api/devicetypes/homes.d.storm_variant1/events is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000006, previousRequestId: no previous request id, message: Client has been authenticated for /api/devicetypes/homes.d.storm_variant1/events
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000006, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000006, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000006, previousRequestId: no previous request id, message: /api/devicetypes/{everything} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 52.5219ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/devices/89297/eventactions application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devices/89297/eventactions
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devices/89297/eventactions, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.9704ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.2151ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/devices/89297/eventactions
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89297/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89297/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.9045ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.1342ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000007, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/eventactions/devices/{deviceId}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000007, previousRequestId: no previous request id, message: /api/devices/89297/eventactions is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000007, previousRequestId: no previous request id, message: Client has been authenticated for /api/devices/89297/eventactions
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000007, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000007, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000007, previousRequestId: no previous request id, message: /api/eventactions/devices/{deviceId} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 147.4751ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/devicetypes/homes.d.storm_variant1/events application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devicetypes/homes.d.storm_variant1/events
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devicetypes/homes.d.storm_variant1/events, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RC:00000003, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/devicetypes/{everything}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RC:00000003, previousRequestId: no previous request id, message: /api/devicetypes/homes.d.storm_variant1/events is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RC:00000003, previousRequestId: no previous request id, message: Client has been authenticated for /api/devicetypes/homes.d.storm_variant1/events
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RC:00000003, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RC:00000003, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RC:00000003, previousRequestId: no previous request id, message: /api/devicetypes/{everything} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 9.8525ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/devicetypes/homes.d.storm_variant1/events application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devicetypes/homes.d.storm_variant1/events
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devicetypes/homes.d.storm_variant1/events, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RF:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/devicetypes/{everything}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RF:00000002, previousRequestId: no previous request id, message: /api/devicetypes/homes.d.storm_variant1/events is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RF:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/devicetypes/homes.d.storm_variant1/events
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RF:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RF:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RF:00000002, previousRequestId: no previous request id, message: /api/devicetypes/{everything} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 12.1515ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/devices/89716/eventactions application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devices/89716/eventactions
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devices/89716/eventactions, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 44.2539ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 44.5685ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/devices/89716/eventactions
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89716/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89716/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 5.0525ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.2836ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000008, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/eventactions/devices/{deviceId}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000008, previousRequestId: no previous request id, message: /api/devices/89716/eventactions is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000008, previousRequestId: no previous request id, message: Client has been authenticated for /api/devices/89716/eventactions
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000008, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000008, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000008, previousRequestId: no previous request id, message: /api/eventactions/devices/{deviceId} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 62.057ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.5705ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.8774ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.3769ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.6044ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000009, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000009, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000009, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000009, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000009, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:00000009, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1676.5024ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.3939ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.6313ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.1574ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.6936ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3R6:00000004, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R6:00000004, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R6:00000004, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R6:00000004, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R6:00000004, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R6:00000004, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2568.2457ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 PUT http://apigateway2.stage.resideo.com/api/devices/89716/control application/json; charset=utf-8 108
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571486124,"nbf":1571484324,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Y0RSc3FRTzduSjJEZzlsRkVGb3Q2RUhiNlUzeHk2WldTNGhnREdnakxCZjRnemNHaFl1Y3R0SGt5N2ZCU3RVOA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571484324}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devices/89716/control
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devices/89716/control, , PUT
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.6625ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.0607ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/devices/89716/control
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89716/E
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89716/E
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.509ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.8288ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3R1:00000005, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/devices/{deviceId}/control
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R1:00000005, previousRequestId: no previous request id, message: /api/devices/89716/control is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R1:00000005, previousRequestId: no previous request id, message: Client has been authenticated for /api/devices/89716/control
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R1:00000005, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R1:00000005, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R1:00000005, previousRequestId: no previous request id, message: /api/devices/{deviceId}/control route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1569.5373ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.4761ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.7608ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      List of location for the user
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.1059ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.4194ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      aclIds is 232949,233494,233495,233662,233664,233667,233668,233923,234156,236153
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RG:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RG:00000001, previousRequestId: no previous request id, message: /api/locations is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RG:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RG:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RG:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RG:00000001, previousRequestId: no previous request id, message: /api/locations route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling Via Query Parameters.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 44.4842ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.7456ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.9951ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.4865ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.7748ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3R5:0000000A, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:0000000A, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:0000000A, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:0000000A, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:0000000A, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R5:0000000A, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233495/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233495/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233495/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.2836ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.5451ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233495/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233495/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233495/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 5.3641ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.5799ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RG:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RG:00000002, previousRequestId: no previous request id, message: /api/locations/233495/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RG:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233495/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RG:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RG:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RG:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233667/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233667/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233667/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 39.7744ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.8582ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.1103ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233667/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233667/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233667/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.3459ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.5807ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233494/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RH:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RH:00000001, previousRequestId: no previous request id, message: /api/locations/233667/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233494/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RH:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233667/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RH:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RH:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RH:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233494/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233668/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.4079ms - OK
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.7214ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233668/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 36.6362ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233494/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233494/R
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233494/R
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233668/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 5.6941ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 6.0212ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RG:00000003, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RG:00000003, previousRequestId: no previous request id, message: /api/locations/233494/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RG:00000003, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233494/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RG:00000003, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RG:00000003, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RG:00000003, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.4325ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.7408ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233668/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233668/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233668/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.655ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.9841ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RI:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RI:00000001, previousRequestId: no previous request id, message: /api/locations/233668/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RI:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233668/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RI:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RI:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RI:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 44.3671ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 39.15ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1440.2288ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/236153/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/236153/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/236153/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.9019ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.1599ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/236153/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/236153/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/236153/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.5866ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.8284ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RI:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RI:00000002, previousRequestId: no previous request id, message: /api/locations/236153/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RI:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/236153/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RI:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RI:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RI:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 38.9523ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571486124,"nbf":1571484324,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Y0RSc3FRTzduSjJEZzlsRkVGb3Q2RUhiNlUzeHk2WldTNGhnREdnakxCZjRnemNHaFl1Y3R0SGt5N2ZCU3RVOA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571484324}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.7759ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.0589ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.6532ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.9249ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3R1:00000006, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R1:00000006, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R1:00000006, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R1:00000006, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R1:00000006, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R1:00000006, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 834.2707ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571486124,"nbf":1571484324,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Y0RSc3FRTzduSjJEZzlsRkVGb3Q2RUhiNlUzeHk2WldTNGhnREdnakxCZjRnemNHaFl1Y3R0SGt5N2ZCU3RVOA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571484324}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 17.3763ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 17.6751ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 5.0224ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.2894ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3R1:00000007, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R1:00000007, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3R1:00000007, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R1:00000007, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R1:00000007, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3R1:00000007, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1324.3371ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 14.0006ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 14.5095ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.2587ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.4972ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RI:00000003, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RI:00000003, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RI:00000003, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RI:00000003, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RI:00000003, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RI:00000003, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2252.3503ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/devices/89742/schedules application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devices/89742/schedules
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devices/89742/schedules, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 14.1885ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 14.5274ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/devices/89742/schedules
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/3/89742/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/3/89742/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 5.5739ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.8552ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RI:00000004, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/devices/{everything}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RI:00000004, previousRequestId: no previous request id, message: /api/devices/89742/schedules is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RI:00000004, previousRequestId: no previous request id, message: Client has been authenticated for /api/devices/89742/schedules
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RI:00000004, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RI:00000004, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RI:00000004, previousRequestId: no previous request id, message: /api/devices/{everything} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1213.3619ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.0245ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.3001ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.6515ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.9734ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000001, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487928,"nbf":1571486128,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"V3FsM0RZMWRJNFNybFZUR2VJVVRBaldIc29pcWpTNWlRUWtUaDNyT2JsRGUzanFWV0lKazlaM0htblVCc3VLYw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486128}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.9301ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 14.1839ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 5.2067ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.442ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000001, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1803.2918ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1660.6232ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 PUT http://apigateway2.stage.resideo.com/api/locations/237214/vacationhold application/json; charset=utf-8 285
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487928,"nbf":1571486128,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"V3FsM0RZMWRJNFNybFZUR2VJVVRBaldIc29pcWpTNWlRUWtUaDNyT2JsRGUzanFWV0lKazlaM0htblVCc3VLYw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486128}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/vacationhold, , PUT
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000002, previousRequestId: no previous request id, message: /api/locations/237214/vacationhold is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/vacationhold route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 735.9132ms 204 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/devices/schedule/template?countryCode=US&deviceTypeId=homes.d.storm_variant1 application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devices/schedule/template
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devices/schedule/template, ?countryCode=US&deviceTypeId=homes.d.storm_variant1, GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RL:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/devices/{everything}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RL:00000001, previousRequestId: no previous request id, message: /api/devices/schedule/template is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RL:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/devices/schedule/template
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RL:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RL:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RL:00000001, previousRequestId: no previous request id, message: /api/devices/{everything} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 125.271ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 14.4771ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 14.7306ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.9928ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.2979ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000002, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1905.1073ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 PUT http://apigateway2.stage.resideo.com/api/locations/237214/vacationhold application/json; charset=utf-8 286
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487928,"nbf":1571486128,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"V3FsM0RZMWRJNFNybFZUR2VJVVRBaldIc29pcWpTNWlRUWtUaDNyT2JsRGUzanFWV0lKazlaM0htblVCc3VLYw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486128}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/vacationhold, , PUT
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000003, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000003, previousRequestId: no previous request id, message: /api/locations/237214/vacationhold is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000003, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000003, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000003, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000003, previousRequestId: no previous request id, message: /api/locations/{locationId}/vacationhold route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 400.677ms 204 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.7499ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.1314ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.389ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.7391ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000003, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000003, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000003, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000003, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000003, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000003, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2340.5644ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/vacationhold application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/vacationhold, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000004, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000004, previousRequestId: no previous request id, message: /api/locations/237214/vacationhold is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000004, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000004, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000004, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000004, previousRequestId: no previous request id, message: /api/locations/{locationId}/vacationhold route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 496.9755ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487928,"nbf":1571486128,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"V3FsM0RZMWRJNFNybFZUR2VJVVRBaldIc29pcWpTNWlRUWtUaDNyT2JsRGUzanFWV0lKazlaM0htblVCc3VLYw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486128}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.2861ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.5812ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.9606ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.184ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000004, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000004, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000004, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000004, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000004, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000004, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1809.498ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 PUT http://apigateway2.stage.resideo.com/api/devices/89716/control application/json; charset=utf-8,application/json; charset=utf-8 479
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devices/89716/control
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devices/89716/control, , PUT
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.4649ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.7768ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/devices/89716/control
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89716/E
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89716/E
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 9.7759ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 10.1126ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000005, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/devices/{deviceId}/control
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000005, previousRequestId: no previous request id, message: /api/devices/89716/control is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000005, previousRequestId: no previous request id, message: Client has been authenticated for /api/devices/89716/control
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000005, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000005, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000005, previousRequestId: no previous request id, message: /api/devices/{deviceId}/control route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 485.5197ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/vacationhold application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/vacationhold, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000006, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000006, previousRequestId: no previous request id, message: /api/locations/237214/vacationhold is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000006, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000006, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000006, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000006, previousRequestId: no previous request id, message: /api/locations/{locationId}/vacationhold route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 577.2352ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.4081ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.6872ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.3332ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.7194ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000007, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000007, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000007, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000007, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000007, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000007, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2453.0974ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/vacationhold application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487928,"nbf":1571486128,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"V3FsM0RZMWRJNFNybFZUR2VJVVRBaldIc29pcWpTNWlRUWtUaDNyT2JsRGUzanFWV0lKazlaM0htblVCc3VLYw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486128}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/vacationhold, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000005, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000005, previousRequestId: no previous request id, message: /api/locations/237214/vacationhold is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000005, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000005, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000005, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000005, previousRequestId: no previous request id, message: /api/locations/{locationId}/vacationhold route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 385.5598ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/vacationhold application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/vacationhold, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000008, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000008, previousRequestId: no previous request id, message: /api/locations/237214/vacationhold is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000008, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000008, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000008, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000008, previousRequestId: no previous request id, message: /api/locations/{locationId}/vacationhold route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 490.732ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 PUT http://apigateway2.stage.resideo.com/api/locations/237214/vacationhold application/json; charset=utf-8,application/json; charset=utf-8 290
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/vacationhold, , PUT
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000009, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000009, previousRequestId: no previous request id, message: /api/locations/237214/vacationhold is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000009, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000009, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000009, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:00000009, previousRequestId: no previous request id, message: /api/locations/{locationId}/vacationhold route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1554.8922ms 204 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487928,"nbf":1571486128,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"V3FsM0RZMWRJNFNybFZUR2VJVVRBaldIc29pcWpTNWlRUWtUaDNyT2JsRGUzanFWV0lKazlaM0htblVCc3VLYw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486128}
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.2071ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.5576ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 5.2614ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.5329ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000006, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000006, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000006, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000006, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000006, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000006, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/vacationhold application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/vacationhold, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RM:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RM:00000001, previousRequestId: no previous request id, message: /api/locations/237214/vacationhold is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RM:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RM:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RM:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RM:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/vacationhold route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 571.226ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1887.1432ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.0245ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.2777ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 5.6821ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.9429ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:0000000A, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:0000000A, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:0000000A, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:0000000A, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:0000000A, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:0000000A, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1985.9177ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.1487ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.4708ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.2484ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.5308ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:0000000B, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:0000000B, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:0000000B, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:0000000B, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:0000000B, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:0000000B, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487928,"nbf":1571486128,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"V3FsM0RZMWRJNFNybFZUR2VJVVRBaldIc29pcWpTNWlRUWtUaDNyT2JsRGUzanFWV0lKazlaM0htblVCc3VLYw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486128}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 14.5836ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 14.9846ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.7382ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.1365ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000007, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000007, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000007, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000007, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000007, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000007, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2206.113ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1872.305ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 PUT http://apigateway2.stage.resideo.com/api/locations/237214/vacationhold application/json; charset=utf-8 280
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487928,"nbf":1571486128,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"V3FsM0RZMWRJNFNybFZUR2VJVVRBaldIc29pcWpTNWlRUWtUaDNyT2JsRGUzanFWV0lKazlaM0htblVCc3VLYw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486128}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/vacationhold, , PUT
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000008, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000008, previousRequestId: no previous request id, message: /api/locations/237214/vacationhold is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000008, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000008, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000008, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000008, previousRequestId: no previous request id, message: /api/locations/{locationId}/vacationhold route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 364.4573ms 204 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/vacationhold application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487928,"nbf":1571486128,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"V3FsM0RZMWRJNFNybFZUR2VJVVRBaldIc29pcWpTNWlRUWtUaDNyT2JsRGUzanFWV0lKazlaM0htblVCc3VLYw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486128}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/vacationhold, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000009, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000009, previousRequestId: no previous request id, message: /api/locations/237214/vacationhold is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000009, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000009, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000009, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000009, previousRequestId: no previous request id, message: /api/locations/{locationId}/vacationhold route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 426.5768ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.3876ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.0946ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.9574ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.2273ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:0000000C, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:0000000C, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:0000000C, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:0000000C, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:0000000C, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:0000000C, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487928,"nbf":1571486128,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"V3FsM0RZMWRJNFNybFZUR2VJVVRBaldIc29pcWpTNWlRUWtUaDNyT2JsRGUzanFWV0lKazlaM0htblVCc3VLYw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486128}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 15.8508ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 16.2257ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.7359ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.2259ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000000A, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000000A, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000000A, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000000A, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000000A, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000000A, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2563.4891ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2203.825ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.1742ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.4595ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.7176ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.9688ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RN:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RN:00000001, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RN:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RN:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RN:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RN:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2357.122ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233668/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233668/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233668/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.3697ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.6587ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233662/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233668/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233668/R
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233668/R
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233662/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233662/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.9989ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.3219ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RN:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RN:00000002, previousRequestId: no previous request id, message: /api/locations/233668/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RN:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233668/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RN:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RN:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RN:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 38.9802ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233494/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233494/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233494/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.1659ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.458ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233494/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233494/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233494/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.0944ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.3229ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RN:00000003, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RN:00000003, previousRequestId: no previous request id, message: /api/locations/233494/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RN:00000003, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233494/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RN:00000003, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RN:00000003, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RN:00000003, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 36.2683ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/236153/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/236153/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/236153/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.0187ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.4183ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/236153/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/236153/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/236153/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 5.3195ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.6236ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RN:00000004, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RN:00000004, previousRequestId: no previous request id, message: /api/locations/236153/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RN:00000004, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/236153/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RN:00000004, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RN:00000004, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RN:00000004, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 41.6916ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 485.2561ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 485.5651ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233662/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233662/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233662/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 89.6073ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 89.9585ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RO:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RO:00000001, previousRequestId: no previous request id, message: /api/locations/233662/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RO:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233662/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RO:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RO:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RO:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 597.2276ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487928,"nbf":1571486128,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"V3FsM0RZMWRJNFNybFZUR2VJVVRBaldIc29pcWpTNWlRUWtUaDNyT2JsRGUzanFWV0lKazlaM0htblVCc3VLYw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486128}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.5483ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.8607ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.821ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.1085ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000000B, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000000B, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000000B, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000000B, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000000B, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000000B, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1249.7835ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.7994ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.0772ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.6027ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.8706ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:0000000D, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:0000000D, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:0000000D, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:0000000D, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:0000000D, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:0000000D, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.2162ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.552ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.0695ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.3314ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RO:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RO:00000002, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RO:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RO:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RO:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RO:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2284.2516ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2162.3042ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/devices/89716/schedules application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487928,"nbf":1571486128,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"V3FsM0RZMWRJNFNybFZUR2VJVVRBaldIc29pcWpTNWlRUWtUaDNyT2JsRGUzanFWV0lKazlaM0htblVCc3VLYw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486128}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devices/89716/schedules
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devices/89716/schedules, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.6832ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.0481ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/devices/89716/schedules
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89716/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89716/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 5.2749ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.6063ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000000C, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/devices/{everything}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000000C, previousRequestId: no previous request id, message: /api/devices/89716/schedules is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000000C, previousRequestId: no previous request id, message: Client has been authenticated for /api/devices/89716/schedules
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000000C, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000000C, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000000C, previousRequestId: no previous request id, message: /api/devices/{everything} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 944.5386ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/vacationhold application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487928,"nbf":1571486128,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"V3FsM0RZMWRJNFNybFZUR2VJVVRBaldIc29pcWpTNWlRUWtUaDNyT2JsRGUzanFWV0lKazlaM0htblVCc3VLYw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486128}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/vacationhold, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000000D, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000000D, previousRequestId: no previous request id, message: /api/locations/237214/vacationhold is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000000D, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000000D, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000000D, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000000D, previousRequestId: no previous request id, message: /api/locations/{locationId}/vacationhold route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 372.8948ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.6548ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.9232ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.7019ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.9555ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:0000000E, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:0000000E, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:0000000E, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:0000000E, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:0000000E, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RJ:0000000E, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.43ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.7439ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.6622ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.9769ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RO:00000003, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RO:00000003, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RO:00000003, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RO:00000003, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RO:00000003, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RO:00000003, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487928,"nbf":1571486128,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"V3FsM0RZMWRJNFNybFZUR2VJVVRBaldIc29pcWpTNWlRUWtUaDNyT2JsRGUzanFWV0lKazlaM0htblVCc3VLYw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486128}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.9387ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.2393ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.6155ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.9093ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000000E, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000000E, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000000E, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000000E, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000000E, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000000E, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1984.9545ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1940.6708ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1599.3398ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.6078ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.9735ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.758ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.1957ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RO:00000004, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RO:00000004, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RO:00000004, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RO:00000004, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RO:00000004, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RO:00000004, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487928,"nbf":1571486128,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"V3FsM0RZMWRJNFNybFZUR2VJVVRBaldIc29pcWpTNWlRUWtUaDNyT2JsRGUzanFWV0lKazlaM0htblVCc3VLYw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486128}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.6275ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.9108ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.0013ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.3167ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000000F, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000000F, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000000F, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000000F, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000000F, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000000F, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2235.7933ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1585.1601ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.5122ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.8301ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.1867ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.5081ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000001, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2081.4332ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487928,"nbf":1571486128,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"V3FsM0RZMWRJNFNybFZUR2VJVVRBaldIc29pcWpTNWlRUWtUaDNyT2JsRGUzanFWV0lKazlaM0htblVCc3VLYw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486128}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.3326ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.6356ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.7241ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.0702ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000010, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000010, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000010, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000010, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000010, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000010, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2453.8133ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.0377ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.4083ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.6784ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.0057ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000002, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2218.9693ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487928,"nbf":1571486128,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"V3FsM0RZMWRJNFNybFZUR2VJVVRBaldIc29pcWpTNWlRUWtUaDNyT2JsRGUzanFWV0lKazlaM0htblVCc3VLYw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486128}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.6548ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.9718ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.8ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.1235ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000011, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000011, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000011, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000011, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000011, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000011, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2185.377ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.593ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.8855ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.8105ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.0708ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000003, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000003, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000003, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000003, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000003, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000003, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1631.7606ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487928,"nbf":1571486128,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"V3FsM0RZMWRJNFNybFZUR2VJVVRBaldIc29pcWpTNWlRUWtUaDNyT2JsRGUzanFWV0lKazlaM0htblVCc3VLYw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486128}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.6158ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.9262ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 6.0305ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 6.3709ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000012, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000012, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000012, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000012, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000012, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000012, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1282.5295ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.9951ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.2726ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.9931ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.2586ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000004, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000004, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000004, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000004, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000004, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000004, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2211.4667ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.8403ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 14.4841ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.0478ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.4067ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RQ:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RQ:00000001, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RQ:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RQ:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RQ:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RQ:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1639.0624ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233664/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233664/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233664/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.2965ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.5712ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233664/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233664/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233664/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.7723ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.0226ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233923/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RQ:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RQ:00000002, previousRequestId: no previous request id, message: /api/locations/233664/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RQ:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233664/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RQ:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RQ:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RQ:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233923/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233923/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.24ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.6329ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 40.1714ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233923/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233923/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233923/R
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/236153/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/236153/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/236153/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.839ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.0829ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RR:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RR:00000001, previousRequestId: no previous request id, message: /api/locations/233923/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RR:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233923/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RR:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RR:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RR:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 38.8893ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 95.2883ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 95.5218ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/236153/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/236153/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/236153/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.9368ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.2059ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000001, previousRequestId: no previous request id, message: /api/locations/236153/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/236153/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 121.644ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233494/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233494/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233494/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.9437ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.5009ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233494/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233494/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233494/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.5623ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.8025ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000002, previousRequestId: no previous request id, message: /api/locations/233494/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233494/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 36.5983ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487928,"nbf":1571486128,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"V3FsM0RZMWRJNFNybFZUR2VJVVRBaldIc29pcWpTNWlRUWtUaDNyT2JsRGUzanFWV0lKazlaM0htblVCc3VLYw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486128}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.9044ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.1969ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.9681ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.2442ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000013, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000013, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000013, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000013, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000013, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000013, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1600.5893ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.9428ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.255ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.8798ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.1104ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000003, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000003, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000003, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000003, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000003, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000003, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2595.9092ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 16.1967ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 16.4644ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.706ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.0087ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000005, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000005, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000005, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000005, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000005, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000005, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2288.8894ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487928,"nbf":1571486128,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"V3FsM0RZMWRJNFNybFZUR2VJVVRBaldIc29pcWpTNWlRUWtUaDNyT2JsRGUzanFWV0lKazlaM0htblVCc3VLYw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486128}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 29.9275ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 30.3716ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.2221ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.639ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000014, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000014, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000014, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000014, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000014, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000014, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1056.9377ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.1274ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.3835ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.179ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.4434ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000004, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000004, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000004, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000004, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000004, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000004, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2684.82ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.729ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.0029ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.5085ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.7297ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000006, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000006, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000006, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000006, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000006, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000006, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2187.6626ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.6967ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.9696ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.9627ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.29ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000005, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000005, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000005, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000005, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000005, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000005, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2404.6248ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487928,"nbf":1571486128,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"V3FsM0RZMWRJNFNybFZUR2VJVVRBaldIc29pcWpTNWlRUWtUaDNyT2JsRGUzanFWV0lKazlaM0htblVCc3VLYw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486128}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.0896ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.4367ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.1733ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.442ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000015, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000015, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000015, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000015, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000015, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000015, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1610.5741ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.3272ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.6174ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.3272ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.5614ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000006, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000006, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000006, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000006, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000006, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000006, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2324.7521ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.4924ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.7783ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.0453ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.2667ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000007, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000007, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000007, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000007, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000007, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000007, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1786.1417ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.7031ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.9996ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.1866ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.4558ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000007, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000007, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000007, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000007, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000007, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000007, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1705.7402ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487928,"nbf":1571486128,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"V3FsM0RZMWRJNFNybFZUR2VJVVRBaldIc29pcWpTNWlRUWtUaDNyT2JsRGUzanFWV0lKazlaM0htblVCc3VLYw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486128}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.2856ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.5515ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.7539ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.0686ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000016, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000016, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000016, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000016, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000016, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000016, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1274.8901ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.7538ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.0211ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.573ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.3245ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000008, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000008, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000008, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000008, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000008, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000008, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2024.9901ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.5206ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.8614ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.471ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.8038ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000008, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000008, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000008, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000008, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000008, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RS:00000008, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2475.4444ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487928,"nbf":1571486128,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"V3FsM0RZMWRJNFNybFZUR2VJVVRBaldIc29pcWpTNWlRUWtUaDNyT2JsRGUzanFWV0lKazlaM0htblVCc3VLYw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486128}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 19.4935ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 19.7702ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.9846ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.2931ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000017, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000017, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000017, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000017, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000017, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000017, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 911.507ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.8797ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.1433ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.8037ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.0609ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000009, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000009, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000009, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000009, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000009, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000009, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487928,"nbf":1571486128,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"V3FsM0RZMWRJNFNybFZUR2VJVVRBaldIc29pcWpTNWlRUWtUaDNyT2JsRGUzanFWV0lKazlaM0htblVCc3VLYw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486128}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.0915ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.3599ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.624ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.8831ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000018, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000018, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000018, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000018, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000018, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000018, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1802.8373ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1692.5931ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.2889ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.5495ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      List of location for the user
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.4669ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.7076ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      aclIds is 232949,233494,233495,233662,233664,233667,233668,233923,234156,236153
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RT:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RT:00000001, previousRequestId: no previous request id, message: /api/locations is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RT:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RT:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RT:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RT:00000001, previousRequestId: no previous request id, message: /api/locations route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling Via Query Parameters.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 82.2448ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/234156/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/234156/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/234156/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.4741ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.72ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/234156/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/234156/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/234156/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.6005ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.148ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RT:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RT:00000002, previousRequestId: no previous request id, message: /api/locations/234156/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RT:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/234156/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RT:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RT:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RT:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233664/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 37.9257ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233664/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233664/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233494/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233494/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.4125ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 10.6724ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233664/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233664/R
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233494/devices/info, , GET
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233664/R
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.4333ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.6963ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RU:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RU:00000001, previousRequestId: no previous request id, message: /api/locations/233664/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RU:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233664/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RU:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RU:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RU:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.5804ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.842ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233494/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233494/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233494/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 5.2005ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 33.5586ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.6148ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RT:00000003, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RT:00000003, previousRequestId: no previous request id, message: /api/locations/233494/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RT:00000003, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233494/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RT:00000003, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RT:00000003, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RT:00000003, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233495/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233495/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233495/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 36.9209ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.8132ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.0639ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233495/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233495/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233495/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.9255ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.1868ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RU:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RU:00000002, previousRequestId: no previous request id, message: /api/locations/233495/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RU:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233495/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RU:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RU:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RU:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 35.3917ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233662/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233662/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233662/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.659ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.0786ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233662/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233662/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233662/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.8424ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.2207ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RU:00000003, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RU:00000003, previousRequestId: no previous request id, message: /api/locations/233662/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RU:00000003, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233662/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RU:00000003, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RU:00000003, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RU:00000003, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 41.0582ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487928,"nbf":1571486128,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"V3FsM0RZMWRJNFNybFZUR2VJVVRBaldIc29pcWpTNWlRUWtUaDNyT2JsRGUzanFWV0lKazlaM0htblVCc3VLYw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486128}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 57.4796ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 57.8311ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.2267ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.4401ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000019, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000019, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000019, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000019, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000019, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000019, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2302.2822ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571488150,"nbf":1571486350,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"SktZWkZaTlZyckxndFlaUDNXSWhwdUJBOUZGcDFQcGZBTzNsanZRSFpBUng2bDFSZmpnWGhZQVdxcURwZ0pMNQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486350}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 14.0261ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 14.2753ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 5.3063ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.5398ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RV:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RV:00000001, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RV:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RV:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RV:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RV:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1158.7329ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/234156/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571488150,"nbf":1571486350,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"SktZWkZaTlZyckxndFlaUDNXSWhwdUJBOUZGcDFQcGZBTzNsanZRSFpBUng2bDFSZmpnWGhZQVdxcURwZ0pMNQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486350}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/234156/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/234156/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.531ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 14.0172ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/234156/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/234156/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/234156/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 6.0102ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 6.3729ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RV:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RV:00000002, previousRequestId: no previous request id, message: /api/locations/234156/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RV:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/234156/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RV:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RV:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RV:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 47.9401ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233668/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571488150,"nbf":1571486350,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"SktZWkZaTlZyckxndFlaUDNXSWhwdUJBOUZGcDFQcGZBTzNsanZRSFpBUng2bDFSZmpnWGhZQVdxcURwZ0pMNQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486350}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233668/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233668/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.5546ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.8978ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233668/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233668/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233668/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 5.614ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 6.0092ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RV:00000003, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RV:00000003, previousRequestId: no previous request id, message: /api/locations/233668/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RV:00000003, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233668/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RV:00000003, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RV:00000003, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RV:00000003, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 43.4173ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233667/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571488150,"nbf":1571486350,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"SktZWkZaTlZyckxndFlaUDNXSWhwdUJBOUZGcDFQcGZBTzNsanZRSFpBUng2bDFSZmpnWGhZQVdxcURwZ0pMNQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486350}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233667/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233667/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.9985ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.3392ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233667/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233667/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233667/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 5.6891ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 6.0882ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RV:00000004, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RV:00000004, previousRequestId: no previous request id, message: /api/locations/233667/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RV:00000004, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233667/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RV:00000004, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RV:00000004, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RV:00000004, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 41.7185ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/236153/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571488150,"nbf":1571486350,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"SktZWkZaTlZyckxndFlaUDNXSWhwdUJBOUZGcDFQcGZBTzNsanZRSFpBUng2bDFSZmpnWGhZQVdxcURwZ0pMNQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486350}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/236153/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/236153/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 21.7508ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 22.0289ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/236153/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/236153/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/236153/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 5.0549ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.3272ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RV:00000005, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RV:00000005, previousRequestId: no previous request id, message: /api/locations/236153/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RV:00000005, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/236153/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RV:00000005, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RV:00000005, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RV:00000005, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 47.4655ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 14.0447ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 14.3364ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.3063ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.5571ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RP:0000000A, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:0000000A, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:0000000A, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:0000000A, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:0000000A, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:0000000A, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2177.5942ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.4541ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.7796ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.0475ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.3676ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RU:00000004, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RU:00000004, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RU:00000004, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RU:00000004, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RU:00000004, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RU:00000004, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1156.9931ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571488150,"nbf":1571486350,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"SktZWkZaTlZyckxndFlaUDNXSWhwdUJBOUZGcDFQcGZBTzNsanZRSFpBUng2bDFSZmpnWGhZQVdxcURwZ0pMNQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486350}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.3795ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.6574ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      List of location for the user
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 6.6458ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 6.9069ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      aclIds is 232949,233494,233495,233662,233664,233667,233668,233923,234156,236153
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000001, previousRequestId: no previous request id, message: /api/locations is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000001, previousRequestId: no previous request id, message: /api/locations route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling Via Query Parameters.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 44.0218ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487928,"nbf":1571486128,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"V3FsM0RZMWRJNFNybFZUR2VJVVRBaldIc29pcWpTNWlRUWtUaDNyT2JsRGUzanFWV0lKazlaM0htblVCc3VLYw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486128}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.1646ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.4254ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.5422ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.778ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000001A, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000001A, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000001A, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000001A, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000001A, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000001A, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571488150,"nbf":1571486350,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"SktZWkZaTlZyckxndFlaUDNXSWhwdUJBOUZGcDFQcGZBTzNsanZRSFpBUng2bDFSZmpnWGhZQVdxcURwZ0pMNQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486350}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.3649ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.6718ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.0716ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.3438ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000002, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1631.0977ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1899.9603ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233662/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571488150,"nbf":1571486350,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"SktZWkZaTlZyckxndFlaUDNXSWhwdUJBOUZGcDFQcGZBTzNsanZRSFpBUng2bDFSZmpnWGhZQVdxcURwZ0pMNQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486350}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233662/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233662/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233667/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.3494ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.6719ms - OK
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571488150,"nbf":1571486350,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"SktZWkZaTlZyckxndFlaUDNXSWhwdUJBOUZGcDFQcGZBTzNsanZRSFpBUng2bDFSZmpnWGhZQVdxcURwZ0pMNQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486350}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233667/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233662/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233662/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233662/R
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233667/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 6.1898ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 6.4403ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000003, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000003, previousRequestId: no previous request id, message: /api/locations/233662/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000003, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233662/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000003, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000003, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000003, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.6698ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.9141ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233667/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233667/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233667/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.7937ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.0355ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S1:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S1:00000001, previousRequestId: no previous request id, message: /api/locations/233667/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S1:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233667/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S1:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S1:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S1:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/234156/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571488150,"nbf":1571486350,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"SktZWkZaTlZyckxndFlaUDNXSWhwdUJBOUZGcDFQcGZBTzNsanZRSFpBUng2bDFSZmpnWGhZQVdxcURwZ0pMNQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486350}
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 42.8958ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/234156/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/234156/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233495/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571488150,"nbf":1571486350,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"SktZWkZaTlZyckxndFlaUDNXSWhwdUJBOUZGcDFQcGZBTzNsanZRSFpBUng2bDFSZmpnWGhZQVdxcURwZ0pMNQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486350}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233495/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 39.4753ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233495/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 9.7018ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 10.0041ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/234156/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/234156/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/234156/R
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.915ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.1726ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S2:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S2:00000001, previousRequestId: no previous request id, message: /api/locations/234156/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S2:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/234156/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S2:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S2:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S2:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 34.6958ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 29.0575ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 29.3333ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233495/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233495/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233495/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.7605ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.0313ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000004, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000004, previousRequestId: no previous request id, message: /api/locations/233495/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000004, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233495/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000004, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000004, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000004, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 52.8517ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/devices/89742/schedules application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571488150,"nbf":1571486350,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"SktZWkZaTlZyckxndFlaUDNXSWhwdUJBOUZGcDFQcGZBTzNsanZRSFpBUng2bDFSZmpnWGhZQVdxcURwZ0pMNQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486350}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devices/89742/schedules
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devices/89742/schedules, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 15.4034ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 15.7289ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/devices/89742/schedules
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/3/89742/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/3/89742/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.3106ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.5806ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000005, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/devices/{everything}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000005, previousRequestId: no previous request id, message: /api/devices/89742/schedules is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000005, previousRequestId: no previous request id, message: Client has been authenticated for /api/devices/89742/schedules
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000005, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000005, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000005, previousRequestId: no previous request id, message: /api/devices/{everything} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/devices/89742/schedules application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devices/89742/schedules
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devices/89742/schedules, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.6069ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.9806ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/devices/89742/schedules
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/3/89742/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/3/89742/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.8481ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.1714ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RU:00000005, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/devices/{everything}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RU:00000005, previousRequestId: no previous request id, message: /api/devices/89742/schedules is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RU:00000005, previousRequestId: no previous request id, message: Client has been authenticated for /api/devices/89742/schedules
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RU:00000005, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RU:00000005, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RU:00000005, previousRequestId: no previous request id, message: /api/devices/{everything} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 809.775ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1204.0922ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 PUT http://apigateway2.stage.resideo.com/api/devices/89742/control application/json; charset=utf-8 247
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571488150,"nbf":1571486350,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"SktZWkZaTlZyckxndFlaUDNXSWhwdUJBOUZGcDFQcGZBTzNsanZRSFpBUng2bDFSZmpnWGhZQVdxcURwZ0pMNQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486350}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devices/89742/control
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devices/89742/control, , PUT
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.6224ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.9056ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/devices/89742/control
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/3/89742/E
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/3/89742/E
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.9309ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.1848ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000006, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/devices/{deviceId}/control
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000006, previousRequestId: no previous request id, message: /api/devices/89742/control is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000006, previousRequestId: no previous request id, message: Client has been authenticated for /api/devices/89742/control
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000006, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000006, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000006, previousRequestId: no previous request id, message: /api/devices/{deviceId}/control route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 467.386ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.4668ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.7067ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.4177ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.6762ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RP:0000000B, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:0000000B, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:0000000B, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:0000000B, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:0000000B, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:0000000B, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1420.697ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 PUT http://apigateway2.stage.resideo.com/api/locations/237214/vacationhold application/json; charset=utf-8 286
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487928,"nbf":1571486128,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"V3FsM0RZMWRJNFNybFZUR2VJVVRBaldIc29pcWpTNWlRUWtUaDNyT2JsRGUzanFWV0lKazlaM0htblVCc3VLYw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486128}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/vacationhold, , PUT
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000001B, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000001B, previousRequestId: no previous request id, message: /api/locations/237214/vacationhold is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000001B, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000001B, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000001B, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000001B, previousRequestId: no previous request id, message: /api/locations/{locationId}/vacationhold route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 462.0311ms 204 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571488150,"nbf":1571486350,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"SktZWkZaTlZyckxndFlaUDNXSWhwdUJBOUZGcDFQcGZBTzNsanZRSFpBUng2bDFSZmpnWGhZQVdxcURwZ0pMNQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486350}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.8238ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 14.1704ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.3418ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.6129ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000007, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000007, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000007, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000007, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000007, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000007, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1378.1727ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.1865ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.4785ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.2338ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.4672ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RU:00000006, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RU:00000006, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RU:00000006, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RU:00000006, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RU:00000006, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RU:00000006, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 911.7329ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.7315ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.9858ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.9406ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.1984ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RP:0000000C, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:0000000C, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:0000000C, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:0000000C, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:0000000C, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:0000000C, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487928,"nbf":1571486128,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"V3FsM0RZMWRJNFNybFZUR2VJVVRBaldIc29pcWpTNWlRUWtUaDNyT2JsRGUzanFWV0lKazlaM0htblVCc3VLYw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486128}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.0559ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.3168ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.5073ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.7504ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000001C, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000001C, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000001C, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000001C, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000001C, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000001C, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2399.4176ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2121.9902ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571488150,"nbf":1571486350,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"SktZWkZaTlZyckxndFlaUDNXSWhwdUJBOUZGcDFQcGZBTzNsanZRSFpBUng2bDFSZmpnWGhZQVdxcURwZ0pMNQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486350}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 15.7798ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 16.0631ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.84ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.0725ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000008, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000008, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000008, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000008, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000008, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000008, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1208.4249ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487665,"nbf":1571485865,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"Mk1EdmQ2QXh6ekxGTUlKazRwNGdQS2MzaEo4RjkwYTRzSXBxbjdrakpsVVByTnd5NFVsRTdXVTZPMUFUZm5zVQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485865}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.8143ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.0753ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 5.4969ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.7743ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RU:00000007, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RU:00000007, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RU:00000007, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RU:00000007, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RU:00000007, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RU:00000007, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1412.5462ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.4828ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.8087ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.7434ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.0132ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RP:0000000D, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:0000000D, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:0000000D, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:0000000D, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:0000000D, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:0000000D, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487928,"nbf":1571486128,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"V3FsM0RZMWRJNFNybFZUR2VJVVRBaldIc29pcWpTNWlRUWtUaDNyT2JsRGUzanFWV0lKazlaM0htblVCc3VLYw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486128}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.8816ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.1269ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.4822ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.7917ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000001D, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000001D, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000001D, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000001D, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000001D, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000001D, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2066.694ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2383.8099ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571488150,"nbf":1571486350,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"SktZWkZaTlZyckxndFlaUDNXSWhwdUJBOUZGcDFQcGZBTzNsanZRSFpBUng2bDFSZmpnWGhZQVdxcURwZ0pMNQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486350}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 14.3019ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 14.5899ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.6031ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.8361ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000009, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000009, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000009, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000009, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000009, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S0:00000009, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1247.1494ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571488150,"nbf":1571486350,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"SktZWkZaTlZyckxndFlaUDNXSWhwdUJBOUZGcDFQcGZBTzNsanZRSFpBUng2bDFSZmpnWGhZQVdxcURwZ0pMNQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486350}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 16.9059ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 18.1018ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      List of location for the user
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 5.6601ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.9492ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      aclIds is 232949,233494,233495,233662,233664,233667,233668,233923,234156,236153
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000001, previousRequestId: no previous request id, message: /api/locations is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000001, previousRequestId: no previous request id, message: /api/locations route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling Via Query Parameters.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 52.5323ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233923/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571488150,"nbf":1571486350,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"SktZWkZaTlZyckxndFlaUDNXSWhwdUJBOUZGcDFQcGZBTzNsanZRSFpBUng2bDFSZmpnWGhZQVdxcURwZ0pMNQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486350}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233923/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233923/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.6764ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.9746ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233923/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233923/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233923/R
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/234156/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571488150,"nbf":1571486350,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"SktZWkZaTlZyckxndFlaUDNXSWhwdUJBOUZGcDFQcGZBTzNsanZRSFpBUng2bDFSZmpnWGhZQVdxcURwZ0pMNQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486350}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/234156/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/234156/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.062ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.3049ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000002, previousRequestId: no previous request id, message: /api/locations/233923/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233923/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.8166ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.0836ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/234156/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/234156/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/234156/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.9828ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.21ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S4:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S4:00000001, previousRequestId: no previous request id, message: /api/locations/234156/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S4:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/234156/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S4:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S4:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S4:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 39.6271ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 35.6533ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233664/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571488150,"nbf":1571486350,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"SktZWkZaTlZyckxndFlaUDNXSWhwdUJBOUZGcDFQcGZBTzNsanZRSFpBUng2bDFSZmpnWGhZQVdxcURwZ0pMNQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486350}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233664/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233664/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233662/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571488150,"nbf":1571486350,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"SktZWkZaTlZyckxndFlaUDNXSWhwdUJBOUZGcDFQcGZBTzNsanZRSFpBUng2bDFSZmpnWGhZQVdxcURwZ0pMNQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486350}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233662/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233662/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.4468ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 10.6904ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233664/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233664/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233664/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.7118ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.9764ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S4:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S4:00000002, previousRequestId: no previous request id, message: /api/locations/233664/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S4:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233664/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S4:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S4:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S4:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.6777ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.9636ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233662/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233662/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233662/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.6546ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.0196ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000003, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000003, previousRequestId: no previous request id, message: /api/locations/233662/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000003, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233662/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000003, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000003, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000003, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 36.2515ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 41.4979ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233494/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571488150,"nbf":1571486350,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"SktZWkZaTlZyckxndFlaUDNXSWhwdUJBOUZGcDFQcGZBTzNsanZRSFpBUng2bDFSZmpnWGhZQVdxcURwZ0pMNQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486350}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233494/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233494/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.0373ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.3435ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233494/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233494/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233494/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.1533ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.4275ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000004, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000004, previousRequestId: no previous request id, message: /api/locations/233494/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000004, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233494/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000004, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000004, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000004, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 39.9752ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.7775ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 14.0462ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.314ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.5206ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RP:0000000E, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:0000000E, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:0000000E, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:0000000E, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:0000000E, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:0000000E, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487928,"nbf":1571486128,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"V3FsM0RZMWRJNFNybFZUR2VJVVRBaldIc29pcWpTNWlRUWtUaDNyT2JsRGUzanFWV0lKazlaM0htblVCc3VLYw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486128}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.3561ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 10.6283ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.6825ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.919ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000001E, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000001E, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000001E, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000001E, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000001E, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000001E, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 962.0006ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1882.4934ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571488150,"nbf":1571486350,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"SktZWkZaTlZyckxndFlaUDNXSWhwdUJBOUZGcDFQcGZBTzNsanZRSFpBUng2bDFSZmpnWGhZQVdxcURwZ0pMNQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486350}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.1394ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.4327ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.2253ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.4968ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000005, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000005, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000005, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000005, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000005, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000005, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2245.0124ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 PUT http://apigateway2.stage.resideo.com/api/devices/89742/control application/json; charset=utf-8 247
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571488150,"nbf":1571486350,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"SktZWkZaTlZyckxndFlaUDNXSWhwdUJBOUZGcDFQcGZBTzNsanZRSFpBUng2bDFSZmpnWGhZQVdxcURwZ0pMNQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486350}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devices/89742/control
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devices/89742/control, , PUT
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.6052ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.9095ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/devices/89742/control
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/3/89742/E
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/3/89742/E
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.7562ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.0272ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000006, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/devices/{deviceId}/control
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000006, previousRequestId: no previous request id, message: /api/devices/89742/control is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000006, previousRequestId: no previous request id, message: Client has been authenticated for /api/devices/89742/control
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000006, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000006, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000006, previousRequestId: no previous request id, message: /api/devices/{deviceId}/control route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 766.7626ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.5759ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.8434ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.8661ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.1072ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RP:0000000F, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:0000000F, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:0000000F, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:0000000F, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:0000000F, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:0000000F, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487928,"nbf":1571486128,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"V3FsM0RZMWRJNFNybFZUR2VJVVRBaldIc29pcWpTNWlRUWtUaDNyT2JsRGUzanFWV0lKazlaM0htblVCc3VLYw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486128}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.5046ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.7744ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.0324ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.3689ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000001F, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000001F, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000001F, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000001F, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000001F, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:0000001F, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1242.0789ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2138.5613ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/vacationhold application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/vacationhold, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S5:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S5:00000001, previousRequestId: no previous request id, message: /api/locations/237214/vacationhold is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S5:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S5:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S5:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S5:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/vacationhold route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 454.8853ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 PUT http://apigateway2.stage.resideo.com/api/locations/237214/vacationhold application/json; charset=utf-8,application/json; charset=utf-8 285
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/vacationhold, , PUT
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000010, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000010, previousRequestId: no previous request id, message: /api/locations/237214/vacationhold is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000010, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000010, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000010, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000010, previousRequestId: no previous request id, message: /api/locations/{locationId}/vacationhold route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 631.2289ms 204 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 PUT http://apigateway2.stage.resideo.com/api/locations/237214/vacationhold application/json; charset=utf-8,application/json; charset=utf-8 63
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/vacationhold, , PUT
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000011, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000011, previousRequestId: no previous request id, message: /api/locations/237214/vacationhold is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000011, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000011, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000011, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000011, previousRequestId: no previous request id, message: /api/locations/{locationId}/vacationhold route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 378.4982ms 204 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.0313ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.2869ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.9628ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.1788ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000012, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000012, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000012, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000012, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000012, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000012, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1431.939ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571488150,"nbf":1571486350,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"SktZWkZaTlZyckxndFlaUDNXSWhwdUJBOUZGcDFQcGZBTzNsanZRSFpBUng2bDFSZmpnWGhZQVdxcURwZ0pMNQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486350}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.2991ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.617ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.0243ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.2968ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000007, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000007, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000007, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000007, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000007, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000007, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1329.004ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487928,"nbf":1571486128,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"V3FsM0RZMWRJNFNybFZUR2VJVVRBaldIc29pcWpTNWlRUWtUaDNyT2JsRGUzanFWV0lKazlaM0htblVCc3VLYw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486128}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.8769ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.2641ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.5891ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.8221ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000020, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000020, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000020, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000020, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000020, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000020, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 3079.2362ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/vacationhold application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/vacationhold, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000013, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000013, previousRequestId: no previous request id, message: /api/locations/237214/vacationhold is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000013, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000013, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000013, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000013, previousRequestId: no previous request id, message: /api/locations/{locationId}/vacationhold route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1823.3164ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487928,"nbf":1571486128,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"V3FsM0RZMWRJNFNybFZUR2VJVVRBaldIc29pcWpTNWlRUWtUaDNyT2JsRGUzanFWV0lKazlaM0htblVCc3VLYw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486128}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.3657ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.7176ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.5712ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.7861ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000021, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000021, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000021, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000021, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000021, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RK:00000021, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1788.6285ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571488150,"nbf":1571486350,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"SktZWkZaTlZyckxndFlaUDNXSWhwdUJBOUZGcDFQcGZBTzNsanZRSFpBUng2bDFSZmpnWGhZQVdxcURwZ0pMNQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486350}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.4982ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.7175ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.0889ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.2598ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000008, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000008, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000008, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000008, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000008, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000008, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1541.7898ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 14.1398ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 14.3982ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.2838ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.5341ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000014, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000014, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000014, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000014, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000014, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000014, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 4903.0307ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 PUT http://apigateway2.stage.resideo.com/api/locations/237214/vacationhold application/json; charset=utf-8,application/json; charset=utf-8 285
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/vacationhold, , PUT
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S6:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S6:00000001, previousRequestId: no previous request id, message: /api/locations/237214/vacationhold is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S6:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S6:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S6:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S6:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/vacationhold route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 721.717ms 204 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/vacationhold application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/vacationhold, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000015, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000015, previousRequestId: no previous request id, message: /api/locations/237214/vacationhold is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000015, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000015, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000015, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000015, previousRequestId: no previous request id, message: /api/locations/{locationId}/vacationhold route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 782.3715ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 PUT http://apigateway2.stage.resideo.com/api/locations/237214/vacationhold application/json; charset=utf-8,application/json; charset=utf-8 63
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/vacationhold, , PUT
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000016, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000016, previousRequestId: no previous request id, message: /api/locations/237214/vacationhold is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000016, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000016, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000016, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3RP:00000016, previousRequestId: no previous request id, message: /api/locations/{locationId}/vacationhold route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 726.8146ms 204 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/devices/89716/schedules application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devices/89716/schedules
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devices/89716/schedules, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.8157ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.0898ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/devices/89716/schedules
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89716/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89716/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.4619ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.684ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S7:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/devices/{everything}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S7:00000001, previousRequestId: no previous request id, message: /api/devices/89716/schedules is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S7:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/devices/89716/schedules
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S7:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S7:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S7:00000001, previousRequestId: no previous request id, message: /api/devices/{everything} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1473.4706ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487928,"nbf":1571486128,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"V3FsM0RZMWRJNFNybFZUR2VJVVRBaldIc29pcWpTNWlRUWtUaDNyT2JsRGUzanFWV0lKazlaM0htblVCc3VLYw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486128}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.6506ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 10.9591ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.4947ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.7262ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000001, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1338.7017ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 POST http://apigateway2.stage.resideo.com/api/notifications/push/subscribe application/json; charset=utf-8,application/json; charset=utf-8 193
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/notifications/push/subscribe
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/notifications/push/subscribe, , POST
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/pushnotification/subscribe
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000001, previousRequestId: no previous request id, message: /api/notifications/push/subscribe is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/notifications/push/subscribe
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000001, previousRequestId: no previous request id, message: /api/pushnotification/subscribe route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 106.1187ms 201 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/236876/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/236876/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/236876/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.2706ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 10.5184ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/236876/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/236876/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/236876/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.7468ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.9746ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000002, previousRequestId: no previous request id, message: /api/locations/236876/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/236876/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1237.5198ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237215/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237215/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237215/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.2802ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.5933ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237215/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237215/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237215/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.4236ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.7721ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000003, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000003, previousRequestId: no previous request id, message: /api/locations/237215/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000003, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237215/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000003, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000003, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000003, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 36.1665ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237222/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237222/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237222/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.7796ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.0146ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237222/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237222/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237222/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.3187ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.5348ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000004, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000004, previousRequestId: no previous request id, message: /api/locations/237222/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000004, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237222/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000004, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000004, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000004, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 36.3594ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/236876/notifications/groups application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/236876/notifications/groups
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/236876/notifications/groups, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.234ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 10.6371ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/236876/notifications/groups
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/236876/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/236876/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.5583ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.7739ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000005, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/notificationgroups/locations/{locationId}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000005, previousRequestId: no previous request id, message: /api/locations/236876/notifications/groups is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000005, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/236876/notifications/groups
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000005, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000005, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000005, previousRequestId: no previous request id, message: /api/notificationgroups/locations/{locationId} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 36.0337ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237212/notifications/groups application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237212/notifications/groups
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237212/notifications/groups, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.0264ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 10.3877ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237212/notifications/groups
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237212/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237212/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.3839ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.6373ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SA:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/notificationgroups/locations/{locationId}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SA:00000001, previousRequestId: no previous request id, message: /api/locations/237212/notifications/groups is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SA:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237212/notifications/groups
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SA:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SA:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SA:00000001, previousRequestId: no previous request id, message: /api/notificationgroups/locations/{locationId} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 26.5263ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237218/notifications/groups application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237218/notifications/groups
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237218/notifications/groups, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.095ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.3943ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237218/notifications/groups
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237218/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237218/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.4451ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.6653ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SA:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/notificationgroups/locations/{locationId}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SA:00000002, previousRequestId: no previous request id, message: /api/locations/237218/notifications/groups is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SA:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237218/notifications/groups
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SA:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SA:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SA:00000002, previousRequestId: no previous request id, message: /api/notificationgroups/locations/{locationId} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 27.3499ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237215/notifications/groups application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237215/notifications/groups
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237215/notifications/groups, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.0938ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.333ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237215/notifications/groups
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237215/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237215/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.537ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.7521ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000006, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/notificationgroups/locations/{locationId}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000006, previousRequestId: no previous request id, message: /api/locations/237215/notifications/groups is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000006, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237215/notifications/groups
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000006, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000006, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000006, previousRequestId: no previous request id, message: /api/notificationgroups/locations/{locationId} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 27.5328ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/devicetypes/homes.d.storm_variant1/events application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devicetypes/homes.d.storm_variant1/events
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devicetypes/homes.d.storm_variant1/events, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SA:00000003, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/devicetypes/{everything}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SA:00000003, previousRequestId: no previous request id, message: /api/devicetypes/homes.d.storm_variant1/events is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SA:00000003, previousRequestId: no previous request id, message: Client has been authenticated for /api/devicetypes/homes.d.storm_variant1/events
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SA:00000003, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SA:00000003, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SA:00000003, previousRequestId: no previous request id, message: /api/devicetypes/{everything} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 12.6892ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/devicetypes/homes.d.storm_variant1/events application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devicetypes/homes.d.storm_variant1/events
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devicetypes/homes.d.storm_variant1/events, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SB:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/devicetypes/{everything}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SB:00000001, previousRequestId: no previous request id, message: /api/devicetypes/homes.d.storm_variant1/events is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SB:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/devicetypes/homes.d.storm_variant1/events
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SB:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SB:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SB:00000001, previousRequestId: no previous request id, message: /api/devicetypes/{everything} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 10.6842ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/devices/89297/eventactions application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devices/89297/eventactions
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devices/89297/eventactions, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.2804ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.5568ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/devices/89297/eventactions
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89297/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89297/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.9878ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.2855ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000007, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/eventactions/devices/{deviceId}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000007, previousRequestId: no previous request id, message: /api/devices/89297/eventactions is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000007, previousRequestId: no previous request id, message: Client has been authenticated for /api/devices/89297/eventactions
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000007, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000007, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000007, previousRequestId: no previous request id, message: /api/eventactions/devices/{deviceId} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 30.0498ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/devicetypes/homes.d.storm_variant1/events application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devicetypes/homes.d.storm_variant1/events
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devicetypes/homes.d.storm_variant1/events, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SB:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/devicetypes/{everything}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SB:00000002, previousRequestId: no previous request id, message: /api/devicetypes/homes.d.storm_variant1/events is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SB:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/devicetypes/homes.d.storm_variant1/events
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SB:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SB:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SB:00000002, previousRequestId: no previous request id, message: /api/devicetypes/{everything} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 9.4636ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/devicetypes/homes.d.storm_variant1/events application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devicetypes/homes.d.storm_variant1/events
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devicetypes/homes.d.storm_variant1/events, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SA:00000004, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/devicetypes/{everything}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SA:00000004, previousRequestId: no previous request id, message: /api/devicetypes/homes.d.storm_variant1/events is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SA:00000004, previousRequestId: no previous request id, message: Client has been authenticated for /api/devicetypes/homes.d.storm_variant1/events
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SA:00000004, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SA:00000004, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SA:00000004, previousRequestId: no previous request id, message: /api/devicetypes/{everything} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 8.3042ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571488150,"nbf":1571486350,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"SktZWkZaTlZyckxndFlaUDNXSWhwdUJBOUZGcDFQcGZBTzNsanZRSFpBUng2bDFSZmpnWGhZQVdxcURwZ0pMNQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486350}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.0361ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.3225ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.8435ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.0904ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000009, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000009, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000009, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000009, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000009, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S3:00000009, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1853.556ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 PUT http://apigateway2.stage.resideo.com/api/locations/237214/vacationhold application/json; charset=utf-8,application/json; charset=utf-8 285
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/vacationhold, , PUT
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000008, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000008, previousRequestId: no previous request id, message: /api/locations/237214/vacationhold is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000008, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000008, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000008, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000008, previousRequestId: no previous request id, message: /api/locations/{locationId}/vacationhold route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 696.751ms 204 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489465,"nbf":1571487665,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cHZjd2NndVAxOXlVVHZYbzJRWmVaNFE3eHdhMkhBYWJOVWpXdmNQV2M4a1FtTUFLUnE0ekdWcFUwS0llYkdPbQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487665}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.9515ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.1802ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      List of location for the user
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.4508ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.6808ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      aclIds is 232949,233494,233495,233662,233664,233667,233668,233923,234156,236153
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000001, previousRequestId: no previous request id, message: /api/locations is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000001, previousRequestId: no previous request id, message: /api/locations route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling Via Query Parameters.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 45.4708ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233667/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489465,"nbf":1571487665,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cHZjd2NndVAxOXlVVHZYbzJRWmVaNFE3eHdhMkhBYWJOVWpXdmNQV2M4a1FtTUFLUnE0ekdWcFUwS0llYkdPbQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487665}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233667/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233667/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.6393ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 10.9226ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233667/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233667/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233667/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.1729ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.3443ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000002, previousRequestId: no previous request id, message: /api/locations/233667/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233667/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233495/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489465,"nbf":1571487665,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cHZjd2NndVAxOXlVVHZYbzJRWmVaNFE3eHdhMkhBYWJOVWpXdmNQV2M4a1FtTUFLUnE0ekdWcFUwS0llYkdPbQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487665}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233495/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233495/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.1198ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 10.4875ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233495/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233495/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233495/R
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 34.4735ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.4935ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.6886ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SD:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SD:00000001, previousRequestId: no previous request id, message: /api/locations/233495/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SD:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233495/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SD:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SD:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SD:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 32.7424ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233664/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233668/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489465,"nbf":1571487665,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cHZjd2NndVAxOXlVVHZYbzJRWmVaNFE3eHdhMkhBYWJOVWpXdmNQV2M4a1FtTUFLUnE0ekdWcFUwS0llYkdPbQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487665}
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489465,"nbf":1571487665,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cHZjd2NndVAxOXlVVHZYbzJRWmVaNFE3eHdhMkhBYWJOVWpXdmNQV2M4a1FtTUFLUnE0ekdWcFUwS0llYkdPbQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487665}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233664/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233668/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233664/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233668/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.528ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 10.7355ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233664/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233664/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233664/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.4236ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.6128ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233668/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233668/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233668/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.3844ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.6275ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.7246ms - OK
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SD:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.9385ms - OK
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SD:00000002, previousRequestId: no previous request id, message: /api/locations/233664/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SD:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233664/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SD:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SD:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SD:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000003, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000003, previousRequestId: no previous request id, message: /api/locations/233668/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000003, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233668/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000003, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000003, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000003, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 34.2436ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 39.9446ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233662/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489465,"nbf":1571487665,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cHZjd2NndVAxOXlVVHZYbzJRWmVaNFE3eHdhMkhBYWJOVWpXdmNQV2M4a1FtTUFLUnE0ekdWcFUwS0llYkdPbQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487665}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233662/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233662/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.1589ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.5515ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233662/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233662/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233662/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.6809ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.0198ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000004, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000004, previousRequestId: no previous request id, message: /api/locations/233662/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000004, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233662/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000004, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000004, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000004, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 39.7267ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/vacationhold application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/vacationhold, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000009, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000009, previousRequestId: no previous request id, message: /api/locations/237214/vacationhold is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000009, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000009, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000009, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:00000009, previousRequestId: no previous request id, message: /api/locations/{locationId}/vacationhold route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 540.9969ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571488150,"nbf":1571486350,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"SktZWkZaTlZyckxndFlaUDNXSWhwdUJBOUZGcDFQcGZBTzNsanZRSFpBUng2bDFSZmpnWGhZQVdxcURwZ0pMNQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486350}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.9637ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.3008ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.1299ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.3562ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SE:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SE:00000001, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SE:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SE:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SE:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SE:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1312.1926ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 PUT http://apigateway2.stage.resideo.com/api/locations/237214/vacationhold application/json; charset=utf-8,application/json; charset=utf-8 63
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/vacationhold, , PUT
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S9:0000000A, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:0000000A, previousRequestId: no previous request id, message: /api/locations/237214/vacationhold is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:0000000A, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:0000000A, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:0000000A, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:0000000A, previousRequestId: no previous request id, message: /api/locations/{locationId}/vacationhold route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233664/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571488150,"nbf":1571486350,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"SktZWkZaTlZyckxndFlaUDNXSWhwdUJBOUZGcDFQcGZBTzNsanZRSFpBUng2bDFSZmpnWGhZQVdxcURwZ0pMNQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486350}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233664/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233664/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.6564ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.0525ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233664/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233664/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233664/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.5925ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.8232ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SE:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SE:00000002, previousRequestId: no previous request id, message: /api/locations/233664/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SE:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233664/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SE:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SE:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SE:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 35.9612ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233668/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571488150,"nbf":1571486350,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"SktZWkZaTlZyckxndFlaUDNXSWhwdUJBOUZGcDFQcGZBTzNsanZRSFpBUng2bDFSZmpnWGhZQVdxcURwZ0pMNQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486350}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233668/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233668/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/234156/devices/info application/json; charset=utf-8 
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571488150,"nbf":1571486350,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"SktZWkZaTlZyckxndFlaUDNXSWhwdUJBOUZGcDFQcGZBTzNsanZRSFpBUng2bDFSZmpnWGhZQVdxcURwZ0pMNQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486350}
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/234156/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/234156/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 9.1085ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 9.3872ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233668/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233668/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233668/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.4165ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.6603ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SE:00000003, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SE:00000003, previousRequestId: no previous request id, message: /api/locations/233668/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SE:00000003, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233668/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SE:00000003, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SE:00000003, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SE:00000003, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.7089ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 10.9358ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/234156/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/234156/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/234156/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.42ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.5956ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000001, previousRequestId: no previous request id, message: /api/locations/234156/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/234156/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 33.1574ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 31.5873ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 464.8654ms 204 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/236153/devices/info application/json; charset=utf-8 
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571488150,"nbf":1571486350,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"SktZWkZaTlZyckxndFlaUDNXSWhwdUJBOUZGcDFQcGZBTzNsanZRSFpBUng2bDFSZmpnWGhZQVdxcURwZ0pMNQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486350}
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/236153/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/236153/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.3282ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.5614ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/236153/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/236153/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/236153/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 8.8235ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 9.214ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000002, previousRequestId: no previous request id, message: /api/locations/236153/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/236153/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 44.3213ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/vacationhold application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/vacationhold, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S9:0000000B, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:0000000B, previousRequestId: no previous request id, message: /api/locations/237214/vacationhold is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:0000000B, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:0000000B, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:0000000B, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:0000000B, previousRequestId: no previous request id, message: /api/locations/{locationId}/vacationhold route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 767.5358ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487928,"nbf":1571486128,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"V3FsM0RZMWRJNFNybFZUR2VJVVRBaldIc29pcWpTNWlRUWtUaDNyT2JsRGUzanFWV0lKazlaM0htblVCc3VLYw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486128}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.2816ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 10.5199ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.8321ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.1412ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000002, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2302.7454ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/devices/89742/schedules application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571488150,"nbf":1571486350,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"SktZWkZaTlZyckxndFlaUDNXSWhwdUJBOUZGcDFQcGZBTzNsanZRSFpBUng2bDFSZmpnWGhZQVdxcURwZ0pMNQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486350}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devices/89742/schedules
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devices/89742/schedules, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.1783ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.4208ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/devices/89742/schedules
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/3/89742/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/3/89742/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.6781ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.5964ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000003, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/devices/{everything}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000003, previousRequestId: no previous request id, message: /api/devices/89742/schedules is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000003, previousRequestId: no previous request id, message: Client has been authenticated for /api/devices/89742/schedules
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000003, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000003, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000003, previousRequestId: no previous request id, message: /api/devices/{everything} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 890.9418ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 PUT http://apigateway2.stage.resideo.com/api/devices/89716/control application/json; charset=utf-8,application/json; charset=utf-8 515
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devices/89716/control
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devices/89716/control, , PUT
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.8411ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.0907ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/devices/89716/control
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89716/E
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89716/E
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.7534ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.9486ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S9:0000000C, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/devices/{deviceId}/control
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:0000000C, previousRequestId: no previous request id, message: /api/devices/89716/control is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:0000000C, previousRequestId: no previous request id, message: Client has been authenticated for /api/devices/89716/control
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:0000000C, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:0000000C, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:0000000C, previousRequestId: no previous request id, message: /api/devices/{deviceId}/control route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 411.6062ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 PUT http://apigateway2.stage.resideo.com/api/devices/89742/control application/json; charset=utf-8 247
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571488150,"nbf":1571486350,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"SktZWkZaTlZyckxndFlaUDNXSWhwdUJBOUZGcDFQcGZBTzNsanZRSFpBUng2bDFSZmpnWGhZQVdxcURwZ0pMNQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486350}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devices/89742/control
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devices/89742/control, , PUT
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.6361ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.8659ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/devices/89742/control
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/3/89742/E
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/3/89742/E
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.4584ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.6751ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000004, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/devices/{deviceId}/control
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000004, previousRequestId: no previous request id, message: /api/devices/89742/control is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000004, previousRequestId: no previous request id, message: Client has been authenticated for /api/devices/89742/control
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000004, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000004, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000004, previousRequestId: no previous request id, message: /api/devices/{deviceId}/control route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 458.0969ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/vacationhold application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/vacationhold, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S9:0000000D, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:0000000D, previousRequestId: no previous request id, message: /api/locations/237214/vacationhold is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:0000000D, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:0000000D, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:0000000D, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:0000000D, previousRequestId: no previous request id, message: /api/locations/{locationId}/vacationhold route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 623.6266ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489465,"nbf":1571487665,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cHZjd2NndVAxOXlVVHZYbzJRWmVaNFE3eHdhMkhBYWJOVWpXdmNQV2M4a1FtTUFLUnE0ekdWcFUwS0llYkdPbQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487665}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.212ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.4911ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.2435ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.4482ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000005, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000005, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000005, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000005, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000005, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000005, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1664.2215ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 PUT http://apigateway2.stage.resideo.com/api/locations/237214/vacationhold application/json; charset=utf-8,application/json; charset=utf-8 63
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487761,"nbf":1571485961,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"qyODv-BWWzEBkQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571485961}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/vacationhold, , PUT
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S9:0000000E, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:0000000E, previousRequestId: no previous request id, message: /api/locations/237214/vacationhold is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:0000000E, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:0000000E, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:0000000E, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:0000000E, previousRequestId: no previous request id, message: /api/locations/{locationId}/vacationhold route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 729.1968ms 204 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487928,"nbf":1571486128,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"V3FsM0RZMWRJNFNybFZUR2VJVVRBaldIc29pcWpTNWlRUWtUaDNyT2JsRGUzanFWV0lKazlaM0htblVCc3VLYw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486128}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 19.7216ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 20.0827ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 7.7857ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 8.0045ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000003, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000003, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000003, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000003, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000003, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000003, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489465,"nbf":1571487665,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cHZjd2NndVAxOXlVVHZYbzJRWmVaNFE3eHdhMkhBYWJOVWpXdmNQV2M4a1FtTUFLUnE0ekdWcFUwS0llYkdPbQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487665}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 18.5045ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 18.7465ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 7.5255ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 7.7392ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000006, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000006, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000006, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000006, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000006, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000006, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1056.9067ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1032.7405ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.8393ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 14.1051ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      List of location for the user
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 6.2275ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 6.4532ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      aclIds is 236876,237212,237213,237214,237215,237218,237222
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000001, previousRequestId: no previous request id, message: /api/locations is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000001, previousRequestId: no previous request id, message: /api/locations route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 POST http://apigateway2.stage.resideo.com/api/notifications/push/subscribe application/json; charset=utf-8,application/json; charset=utf-8 193
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/notifications/push/subscribe
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/notifications/push/subscribe, , POST
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling Via Query Parameters.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 41.8362ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S9:0000000F, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/pushnotification/subscribe
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:0000000F, previousRequestId: no previous request id, message: /api/notifications/push/subscribe is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:0000000F, previousRequestId: no previous request id, message: Client has been authenticated for /api/notifications/push/subscribe
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:0000000F, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:0000000F, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S9:0000000F, previousRequestId: no previous request id, message: /api/pushnotification/subscribe route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 70.5238ms 201 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.7841ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.0437ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.0903ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.3149ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000002, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1170.5013ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237218/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237218/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237218/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.3081ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 10.5842ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237218/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237218/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237218/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.4627ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.7167ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SH:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SH:00000001, previousRequestId: no previous request id, message: /api/locations/237218/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SH:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237218/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SH:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SH:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SH:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237222/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237222/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237222/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 34.5592ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.3701ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 10.5896ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237222/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237222/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237222/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.3143ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.4942ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000007, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000007, previousRequestId: no previous request id, message: /api/locations/237222/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000007, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237222/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000007, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000007, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000007, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 31.0417ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237213/notifications/groups application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237213/notifications/groups
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237213/notifications/groups, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.6745ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 10.9077ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237213/notifications/groups
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237213/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237213/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.6023ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.8534ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SH:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/notificationgroups/locations/{locationId}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SH:00000002, previousRequestId: no previous request id, message: /api/locations/237213/notifications/groups is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SH:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237213/notifications/groups
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SH:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SH:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SH:00000002, previousRequestId: no previous request id, message: /api/notificationgroups/locations/{locationId} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 25.8004ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237215/notifications/groups application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237215/notifications/groups
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237215/notifications/groups, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 15.4733ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 15.7172ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237215/notifications/groups
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237215/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237215/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.6794ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.9505ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000003, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/notificationgroups/locations/{locationId}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000003, previousRequestId: no previous request id, message: /api/locations/237215/notifications/groups is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000003, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237215/notifications/groups
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000003, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000003, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000003, previousRequestId: no previous request id, message: /api/notificationgroups/locations/{locationId} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 31.8607ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/notifications/groups application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/notifications/groups
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/notifications/groups, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 9.9674ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 10.1976ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/notifications/groups
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.4456ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.7112ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SI:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/notificationgroups/locations/{locationId}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SI:00000001, previousRequestId: no previous request id, message: /api/locations/237214/notifications/groups is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SI:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/notifications/groups
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SI:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SI:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SI:00000001, previousRequestId: no previous request id, message: /api/notificationgroups/locations/{locationId} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 25.2758ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/devicetypes/homes.d.storm_variant1/events application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devicetypes/homes.d.storm_variant1/events
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devicetypes/homes.d.storm_variant1/events, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000004, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/devicetypes/{everything}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000004, previousRequestId: no previous request id, message: /api/devicetypes/homes.d.storm_variant1/events is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000004, previousRequestId: no previous request id, message: Client has been authenticated for /api/devicetypes/homes.d.storm_variant1/events
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000004, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000004, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000004, previousRequestId: no previous request id, message: /api/devicetypes/{everything} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 8.6167ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/devices/89297/eventactions application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devices/89297/eventactions
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devices/89297/eventactions, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.1794ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.3995ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/devices/89297/eventactions
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89297/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89297/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.4525ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.653ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SH:00000003, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/eventactions/devices/{deviceId}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SH:00000003, previousRequestId: no previous request id, message: /api/devices/89297/eventactions is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SH:00000003, previousRequestId: no previous request id, message: Client has been authenticated for /api/devices/89297/eventactions
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SH:00000003, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SH:00000003, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SH:00000003, previousRequestId: no previous request id, message: /api/eventactions/devices/{deviceId} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 25.6668ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/devices/89716/eventactions application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devices/89716/eventactions
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devices/89716/eventactions, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.0615ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.3384ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/devices/89716/eventactions
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89716/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89716/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.4183ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.6474ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000005, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/eventactions/devices/{deviceId}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000005, previousRequestId: no previous request id, message: /api/devices/89716/eventactions is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000005, previousRequestId: no previous request id, message: Client has been authenticated for /api/devices/89716/eventactions
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000005, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000005, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000005, previousRequestId: no previous request id, message: /api/eventactions/devices/{deviceId} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 28.2503ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571488150,"nbf":1571486350,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"SktZWkZaTlZyckxndFlaUDNXSWhwdUJBOUZGcDFQcGZBTzNsanZRSFpBUng2bDFSZmpnWGhZQVdxcURwZ0pMNQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486350}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 16.1488ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 16.5156ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 7.1319ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 7.5462ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000005, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000005, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000005, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000005, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000005, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000005, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1602.6167ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489465,"nbf":1571487665,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cHZjd2NndVAxOXlVVHZYbzJRWmVaNFE3eHdhMkhBYWJOVWpXdmNQV2M4a1FtTUFLUnE0ekdWcFUwS0llYkdPbQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487665}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.5408ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.8713ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.7878ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.0756ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000008, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000008, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000008, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000008, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000008, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000008, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2887.3939ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/vacationhold application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/vacationhold, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000006, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000006, previousRequestId: no previous request id, message: /api/locations/237214/vacationhold is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000006, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000006, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000006, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000006, previousRequestId: no previous request id, message: /api/locations/{locationId}/vacationhold route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 465.4214ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487928,"nbf":1571486128,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"V3FsM0RZMWRJNFNybFZUR2VJVVRBaldIc29pcWpTNWlRUWtUaDNyT2JsRGUzanFWV0lKazlaM0htblVCc3VLYw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486128}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 22.3581ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 22.6546ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.3059ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.5126ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000004, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000004, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000004, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000004, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000004, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000004, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2067.1993ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571488150,"nbf":1571486350,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"SktZWkZaTlZyckxndFlaUDNXSWhwdUJBOUZGcDFQcGZBTzNsanZRSFpBUng2bDFSZmpnWGhZQVdxcURwZ0pMNQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486350}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.5976ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.8541ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.6309ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.8559ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000006, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000006, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000006, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000006, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000006, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000006, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1575.5902ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489465,"nbf":1571487665,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cHZjd2NndVAxOXlVVHZYbzJRWmVaNFE3eHdhMkhBYWJOVWpXdmNQV2M4a1FtTUFLUnE0ekdWcFUwS0llYkdPbQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487665}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.3052ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.5344ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.1093ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.2947ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000009, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000009, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000009, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000009, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000009, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000009, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1636.3085ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 15.5256ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 15.7729ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.8993ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.1115ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000007, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000007, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000007, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000007, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000007, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000007, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1254.3692ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487928,"nbf":1571486128,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"V3FsM0RZMWRJNFNybFZUR2VJVVRBaldIc29pcWpTNWlRUWtUaDNyT2JsRGUzanFWV0lKazlaM0htblVCc3VLYw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486128}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.0006ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.2339ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.7453ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.9533ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000005, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000005, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000005, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000005, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000005, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000005, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 3018.5428ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 PUT http://apigateway2.stage.resideo.com/api/devices/89742/control application/json; charset=utf-8 107
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489465,"nbf":1571487665,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cHZjd2NndVAxOXlVVHZYbzJRWmVaNFE3eHdhMkhBYWJOVWpXdmNQV2M4a1FtTUFLUnE0ekdWcFUwS0llYkdPbQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487665}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devices/89742/control
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devices/89742/control, , PUT
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.8999ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.1717ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/devices/89742/control
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/3/89742/E
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/3/89742/E
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.5055ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.7994ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SC:0000000A, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/devices/{deviceId}/control
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:0000000A, previousRequestId: no previous request id, message: /api/devices/89742/control is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:0000000A, previousRequestId: no previous request id, message: Client has been authenticated for /api/devices/89742/control
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:0000000A, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:0000000A, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:0000000A, previousRequestId: no previous request id, message: /api/devices/{deviceId}/control route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571488150,"nbf":1571486350,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"SktZWkZaTlZyckxndFlaUDNXSWhwdUJBOUZGcDFQcGZBTzNsanZRSFpBUng2bDFSZmpnWGhZQVdxcURwZ0pMNQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486350}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.0254ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.3403ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.4439ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.6965ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000007, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000007, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000007, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000007, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000007, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000007, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 815.8339ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1489.1304ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.7614ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.0349ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.2379ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.4486ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000008, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000008, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000008, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000008, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000008, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000008, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1416.6411ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571487928,"nbf":1571486128,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"V3FsM0RZMWRJNFNybFZUR2VJVVRBaldIc29pcWpTNWlRUWtUaDNyT2JsRGUzanFWV0lKazlaM0htblVCc3VLYw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486128}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.9191ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.1853ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.5313ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.8631ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000006, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000006, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000006, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000006, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000006, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000006, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489465,"nbf":1571487665,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cHZjd2NndVAxOXlVVHZYbzJRWmVaNFE3eHdhMkhBYWJOVWpXdmNQV2M4a1FtTUFLUnE0ekdWcFUwS0llYkdPbQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487665}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.1324ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.3666ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.3526ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.5817ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SC:0000000B, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:0000000B, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:0000000B, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:0000000B, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:0000000B, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:0000000B, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2006.9426ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1261.7845ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571488150,"nbf":1571486350,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"SktZWkZaTlZyckxndFlaUDNXSWhwdUJBOUZGcDFQcGZBTzNsanZRSFpBUng2bDFSZmpnWGhZQVdxcURwZ0pMNQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486350}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.4551ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.7876ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.7313ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.9888ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000008, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000008, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000008, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000008, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000008, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000008, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2541.7971ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.1055ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.3311ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.2911ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.4707ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000009, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000009, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000009, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000009, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000009, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000009, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1356.6354ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489743,"nbf":1571487943,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"T3JJYWpJMzJuZHlkNWpsdmRoTUU0aWxkU3l1SXh4VUdRMnFVcmVGT1ZmNUNGcmZycUJVNllOWW9KUEhrQTFlNg","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487943}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.0057ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.2327ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.394ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.5907ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000007, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000007, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000007, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000007, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000007, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000007, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489465,"nbf":1571487665,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cHZjd2NndVAxOXlVVHZYbzJRWmVaNFE3eHdhMkhBYWJOVWpXdmNQV2M4a1FtTUFLUnE0ekdWcFUwS0llYkdPbQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487665}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.9348ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 14.189ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.2656ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.4482ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SC:0000000C, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:0000000C, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:0000000C, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:0000000C, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:0000000C, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:0000000C, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2212.8178ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1351.6414ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571488150,"nbf":1571486350,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"SktZWkZaTlZyckxndFlaUDNXSWhwdUJBOUZGcDFQcGZBTzNsanZRSFpBUng2bDFSZmpnWGhZQVdxcURwZ0pMNQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486350}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 30.7126ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 31.2687ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.2646ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.6624ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000009, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000009, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000009, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000009, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000009, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000009, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1807.8248ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.9163ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.1586ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.9894ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.1748ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SG:0000000A, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:0000000A, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:0000000A, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:0000000A, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:0000000A, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:0000000A, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1252.2591ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489743,"nbf":1571487943,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"T3JJYWpJMzJuZHlkNWpsdmRoTUU0aWxkU3l1SXh4VUdRMnFVcmVGT1ZmNUNGcmZycUJVNllOWW9KUEhrQTFlNg","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487943}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.4185ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.646ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.9158ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.2205ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000008, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000008, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000008, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000008, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000008, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000008, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489465,"nbf":1571487665,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cHZjd2NndVAxOXlVVHZYbzJRWmVaNFE3eHdhMkhBYWJOVWpXdmNQV2M4a1FtTUFLUnE0ekdWcFUwS0llYkdPbQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487665}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.1348ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.374ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.6005ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.8673ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SC:0000000D, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:0000000D, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:0000000D, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:0000000D, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:0000000D, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:0000000D, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2055.3888ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1616.6977ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571488150,"nbf":1571486350,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"SktZWkZaTlZyckxndFlaUDNXSWhwdUJBOUZGcDFQcGZBTzNsanZRSFpBUng2bDFSZmpnWGhZQVdxcURwZ0pMNQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486350}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.467ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.753ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.6216ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.9472ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SF:0000000A, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:0000000A, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:0000000A, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:0000000A, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:0000000A, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:0000000A, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2127.9709ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/vacationhold application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/vacationhold, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SG:0000000B, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:0000000B, previousRequestId: no previous request id, message: /api/locations/237214/vacationhold is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:0000000B, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:0000000B, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:0000000B, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:0000000B, previousRequestId: no previous request id, message: /api/locations/{locationId}/vacationhold route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 817.7918ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 PUT http://apigateway2.stage.resideo.com/api/devices/89716/control application/json; charset=utf-8,application/json; charset=utf-8 515
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devices/89716/control
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devices/89716/control, , PUT
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.5274ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.7739ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/devices/89716/control
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89716/E
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89716/E
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.5014ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.7511ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SJ:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/devices/{deviceId}/control
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SJ:00000001, previousRequestId: no previous request id, message: /api/devices/89716/control is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SJ:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/devices/89716/control
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SJ:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SJ:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SJ:00000001, previousRequestId: no previous request id, message: /api/devices/{deviceId}/control route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 532.3198ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 PUT http://apigateway2.stage.resideo.com/api/locations/237214/vacationhold application/json; charset=utf-8,application/json; charset=utf-8 63
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/vacationhold, , PUT
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SG:0000000C, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:0000000C, previousRequestId: no previous request id, message: /api/locations/237214/vacationhold is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:0000000C, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:0000000C, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:0000000C, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:0000000C, previousRequestId: no previous request id, message: /api/locations/{locationId}/vacationhold route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 659.8973ms 204 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489743,"nbf":1571487943,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"T3JJYWpJMzJuZHlkNWpsdmRoTUU0aWxkU3l1SXh4VUdRMnFVcmVGT1ZmNUNGcmZycUJVNllOWW9KUEhrQTFlNg","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487943}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.2017ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.4414ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.4729ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.6864ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000009, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000009, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000009, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000009, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000009, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000009, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489465,"nbf":1571487665,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cHZjd2NndVAxOXlVVHZYbzJRWmVaNFE3eHdhMkhBYWJOVWpXdmNQV2M4a1FtTUFLUnE0ekdWcFUwS0llYkdPbQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487665}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.3224ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.5894ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.9223ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.1095ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SC:0000000E, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:0000000E, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:0000000E, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:0000000E, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:0000000E, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:0000000E, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1712.6209ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1454.4389ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.533ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.7957ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.6968ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.9385ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SG:0000000D, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:0000000D, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:0000000D, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:0000000D, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:0000000D, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:0000000D, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1264.3003ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 PUT http://apigateway2.stage.resideo.com/api/locations/237214/vacationhold application/json; charset=utf-8,application/json; charset=utf-8 285
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/vacationhold, , PUT
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SG:0000000E, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:0000000E, previousRequestId: no previous request id, message: /api/locations/237214/vacationhold is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:0000000E, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:0000000E, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:0000000E, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:0000000E, previousRequestId: no previous request id, message: /api/locations/{locationId}/vacationhold route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 397.7293ms 204 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571488150,"nbf":1571486350,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"SktZWkZaTlZyckxndFlaUDNXSWhwdUJBOUZGcDFQcGZBTzNsanZRSFpBUng2bDFSZmpnWGhZQVdxcURwZ0pMNQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571486350}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.5576ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.7903ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.5132ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.7204ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SF:0000000B, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:0000000B, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:0000000B, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:0000000B, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:0000000B, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:0000000B, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1864.1441ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 PUT http://apigateway2.stage.resideo.com/api/locations/237214/vacationhold application/json; charset=utf-8,application/json; charset=utf-8 63
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/vacationhold, , PUT
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SG:0000000F, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:0000000F, previousRequestId: no previous request id, message: /api/locations/237214/vacationhold is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:0000000F, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:0000000F, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:0000000F, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:0000000F, previousRequestId: no previous request id, message: /api/locations/{locationId}/vacationhold route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1490.8704ms 204 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/vacationhold application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/vacationhold, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000010, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000010, previousRequestId: no previous request id, message: /api/locations/237214/vacationhold is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000010, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000010, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000010, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000010, previousRequestId: no previous request id, message: /api/locations/{locationId}/vacationhold route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 121.4022ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/vacationhold application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/vacationhold, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000011, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000011, previousRequestId: no previous request id, message: /api/locations/237214/vacationhold is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000011, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000011, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000011, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000011, previousRequestId: no previous request id, message: /api/locations/{locationId}/vacationhold route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 351.9292ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 PUT http://apigateway2.stage.resideo.com/api/devices/89716/control application/json; charset=utf-8,application/json; charset=utf-8 474
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devices/89716/control
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devices/89716/control, , PUT
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 14.6714ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 14.9757ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/devices/89716/control
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89716/E
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89716/E
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.7729ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.0229ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000012, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/devices/{deviceId}/control
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000012, previousRequestId: no previous request id, message: /api/devices/89716/control is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000012, previousRequestId: no previous request id, message: Client has been authenticated for /api/devices/89716/control
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000012, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000012, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000012, previousRequestId: no previous request id, message: /api/devices/{deviceId}/control route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 639.2872ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/vacationhold application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/vacationhold, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000013, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000013, previousRequestId: no previous request id, message: /api/locations/237214/vacationhold is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000013, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000013, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000013, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000013, previousRequestId: no previous request id, message: /api/locations/{locationId}/vacationhold route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 667.0336ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489743,"nbf":1571487943,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"T3JJYWpJMzJuZHlkNWpsdmRoTUU0aWxkU3l1SXh4VUdRMnFVcmVGT1ZmNUNGcmZycUJVNllOWW9KUEhrQTFlNg","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487943}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.9335ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.1659ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.7239ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.9567ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000000A, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000000A, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000000A, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000000A, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000000A, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000000A, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489465,"nbf":1571487665,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cHZjd2NndVAxOXlVVHZYbzJRWmVaNFE3eHdhMkhBYWJOVWpXdmNQV2M4a1FtTUFLUnE0ekdWcFUwS0llYkdPbQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487665}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.5942ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 10.9152ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.0379ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.3141ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SC:0000000F, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:0000000F, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:0000000F, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:0000000F, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:0000000F, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:0000000F, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 PUT http://apigateway2.stage.resideo.com/api/locations/237214/vacationhold application/json; charset=utf-8,application/json; charset=utf-8 63
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/vacationhold, , PUT
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SK:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SK:00000001, previousRequestId: no previous request id, message: /api/locations/237214/vacationhold is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SK:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SK:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SK:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SK:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/vacationhold route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1139.0371ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 479.0754ms 204 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1727.531ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.6756ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 10.9034ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.5296ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.7208ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000014, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000014, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000014, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000014, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000014, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SG:00000014, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1258.8194ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489968,"nbf":1571488168,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"dTFheFNOd3JBcTRLdG5xb0JCcDY5THpmeUxaTzd5bzNkb3pidUU2RjJFVU5GdU5GYTBGa3F5TndNQmFoUUZLWg","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488168}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.606ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.9467ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.8493ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.2378ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SF:0000000C, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:0000000C, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:0000000C, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:0000000C, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:0000000C, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:0000000C, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237212/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237212/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237212/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.8953ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.1621ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237212/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237212/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237212/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.341ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.5795ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000001, previousRequestId: no previous request id, message: /api/locations/237212/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237212/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 33.9589ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/236876/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/236876/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/236876/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.6335ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 10.8793ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/236876/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/236876/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/236876/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.0553ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.2594ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SM:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SM:00000001, previousRequestId: no previous request id, message: /api/locations/236876/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SM:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/236876/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SM:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SM:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SM:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1970.0735ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 34.2656ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 34.6039ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.272ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.5456ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000002, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1281.4556ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1807.6734ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237212/notifications/groups application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237212/notifications/groups
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237212/notifications/groups, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.7289ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.9604ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237212/notifications/groups
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237212/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237212/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.2911ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.4998ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000003, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/notificationgroups/locations/{locationId}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000003, previousRequestId: no previous request id, message: /api/locations/237212/notifications/groups is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000003, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237212/notifications/groups
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000003, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000003, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000003, previousRequestId: no previous request id, message: /api/notificationgroups/locations/{locationId} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 31.3464ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237215/notifications/groups application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237215/notifications/groups
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237215/notifications/groups, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.3435ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.6226ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237215/notifications/groups
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237215/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237215/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.2968ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.5632ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000004, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/notificationgroups/locations/{locationId}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000004, previousRequestId: no previous request id, message: /api/locations/237215/notifications/groups is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000004, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237215/notifications/groups
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000004, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000004, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000004, previousRequestId: no previous request id, message: /api/notificationgroups/locations/{locationId} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 27.5402ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237218/notifications/groups application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237218/notifications/groups
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237218/notifications/groups, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.0116ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 10.3506ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237218/notifications/groups
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237218/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237218/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.7168ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.0127ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SN:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/notificationgroups/locations/{locationId}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SN:00000001, previousRequestId: no previous request id, message: /api/locations/237218/notifications/groups is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SN:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237218/notifications/groups
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SN:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SN:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SN:00000001, previousRequestId: no previous request id, message: /api/notificationgroups/locations/{locationId} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 27.5715ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 16.7934ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 17.0506ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.5141ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.7983ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000005, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000005, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000005, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000005, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000005, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000005, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/devicetypes/homes.d.storm_variant1/events application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devicetypes/homes.d.storm_variant1/events
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devicetypes/homes.d.storm_variant1/events, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000010, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/devicetypes/{everything}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000010, previousRequestId: no previous request id, message: /api/devicetypes/homes.d.storm_variant1/events is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000010, previousRequestId: no previous request id, message: Client has been authenticated for /api/devicetypes/homes.d.storm_variant1/events
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000010, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000010, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000010, previousRequestId: no previous request id, message: /api/devicetypes/{everything} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 52.3325ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/devices/89716/eventactions application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devices/89716/eventactions
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devices/89716/eventactions, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.8126ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.1236ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/devices/89716/eventactions
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89716/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89716/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.5595ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.8875ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000011, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/eventactions/devices/{deviceId}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000011, previousRequestId: no previous request id, message: /api/devices/89716/eventactions is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000011, previousRequestId: no previous request id, message: Client has been authenticated for /api/devices/89716/eventactions
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000011, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000011, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000011, previousRequestId: no previous request id, message: /api/eventactions/devices/{deviceId} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 28.0598ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1392.8014ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/devices/89297/eventactions application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devices/89297/eventactions
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devices/89297/eventactions, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.799ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.0574ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/devices/89297/eventactions
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89297/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89297/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.5987ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.8337ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000006, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/eventactions/devices/{deviceId}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000006, previousRequestId: no previous request id, message: /api/devices/89297/eventactions is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000006, previousRequestId: no previous request id, message: Client has been authenticated for /api/devices/89297/eventactions
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000006, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000006, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000006, previousRequestId: no previous request id, message: /api/eventactions/devices/{deviceId} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 26.2678ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 PUT http://apigateway2.stage.resideo.com/api/locations/237214/vacationhold application/json; charset=utf-8,application/json; charset=utf-8 285
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/vacationhold, , PUT
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000007, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000007, previousRequestId: no previous request id, message: /api/locations/237214/vacationhold is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000007, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000007, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000007, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000007, previousRequestId: no previous request id, message: /api/locations/{locationId}/vacationhold route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 351.0138ms 204 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/vacationhold application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/vacationhold, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000008, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000008, previousRequestId: no previous request id, message: /api/locations/237214/vacationhold is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000008, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000008, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000008, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000008, previousRequestId: no previous request id, message: /api/locations/{locationId}/vacationhold route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 119.8868ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489968,"nbf":1571488168,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"dTFheFNOd3JBcTRLdG5xb0JCcDY5THpmeUxaTzd5bzNkb3pidUU2RjJFVU5GdU5GYTBGa3F5TndNQmFoUUZLWg","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488168}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.384ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.7396ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.4998ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.7071ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SF:0000000D, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:0000000D, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:0000000D, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:0000000D, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:0000000D, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:0000000D, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.6193ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.9146ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.4857ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.7221ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000009, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000009, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000009, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000009, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000009, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SL:00000009, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1724.605ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 PUT http://apigateway2.stage.resideo.com/api/locations/237214/vacationhold application/json; charset=utf-8,application/json; charset=utf-8 63
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/vacationhold, , PUT
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SO:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SO:00000001, previousRequestId: no previous request id, message: /api/locations/237214/vacationhold is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SO:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SO:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SO:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SO:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/vacationhold route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 289.0348ms 204 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1269.3337ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.7019ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.9815ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      List of location for the user
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.9035ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.2145ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      aclIds is 236876,237212,237213,237214,237215,237218,237222
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SP:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SP:00000001, previousRequestId: no previous request id, message: /api/locations is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SP:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SP:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SP:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SP:00000001, previousRequestId: no previous request id, message: /api/locations route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling Via Query Parameters.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 40.1896ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 POST http://apigateway2.stage.resideo.com/api/notifications/push/subscribe application/json; charset=utf-8,application/json; charset=utf-8 193
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/notifications/push/subscribe
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/notifications/push/subscribe, , POST
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/pushnotification/subscribe
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000001, previousRequestId: no previous request id, message: /api/notifications/push/subscribe is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/notifications/push/subscribe
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000001, previousRequestId: no previous request id, message: /api/pushnotification/subscribe route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 47.8511ms 201 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.3956ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.6531ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.6552ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.9174ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000002, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237212/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237212/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237212/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.9993ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.2183ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237212/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237212/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237212/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.43ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.6139ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SR:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SR:00000001, previousRequestId: no previous request id, message: /api/locations/237212/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SR:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237212/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SR:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SR:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SR:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 32.7862ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237218/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237218/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237218/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.8538ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.1848ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237218/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237218/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237218/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.4755ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.6978ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SS:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SS:00000001, previousRequestId: no previous request id, message: /api/locations/237218/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SS:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237218/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SS:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SS:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SS:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 35.1802ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2137.4642ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489743,"nbf":1571487943,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"T3JJYWpJMzJuZHlkNWpsdmRoTUU0aWxkU3l1SXh4VUdRMnFVcmVGT1ZmNUNGcmZycUJVNllOWW9KUEhrQTFlNg","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487943}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.7564ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.1145ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.6296ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.8509ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000000B, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000000B, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000000B, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000000B, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000000B, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000000B, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237212/notifications/groups application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237212/notifications/groups
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237212/notifications/groups, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.2331ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 10.5211ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237212/notifications/groups
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237212/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237212/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.3517ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.6159ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SP:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/notificationgroups/locations/{locationId}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SP:00000002, previousRequestId: no previous request id, message: /api/locations/237212/notifications/groups is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SP:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237212/notifications/groups
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SP:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SP:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SP:00000002, previousRequestId: no previous request id, message: /api/notificationgroups/locations/{locationId} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 27.004ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237213/notifications/groups application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237213/notifications/groups
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237213/notifications/groups, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.1594ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.49ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237213/notifications/groups
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237213/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237213/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.5756ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.8107ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000003, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/notificationgroups/locations/{locationId}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000003, previousRequestId: no previous request id, message: /api/locations/237213/notifications/groups is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000003, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237213/notifications/groups
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000003, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000003, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000003, previousRequestId: no previous request id, message: /api/notificationgroups/locations/{locationId} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 30.4167ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237218/notifications/groups application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237218/notifications/groups
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237218/notifications/groups, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.2228ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.4749ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237218/notifications/groups
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237218/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237218/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.9851ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.2684ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SP:00000003, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/notificationgroups/locations/{locationId}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SP:00000003, previousRequestId: no previous request id, message: /api/locations/237218/notifications/groups is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SP:00000003, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237218/notifications/groups
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SP:00000003, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SP:00000003, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SP:00000003, previousRequestId: no previous request id, message: /api/notificationgroups/locations/{locationId} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 27.1397ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237222/notifications/groups application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237222/notifications/groups
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237222/notifications/groups, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 9.8901ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 10.1944ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237222/notifications/groups
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237222/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237222/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.5724ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.7544ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000004, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/notificationgroups/locations/{locationId}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000004, previousRequestId: no previous request id, message: /api/locations/237222/notifications/groups is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000004, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237222/notifications/groups
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000004, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000004, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000004, previousRequestId: no previous request id, message: /api/notificationgroups/locations/{locationId} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 24.2559ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489465,"nbf":1571487665,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cHZjd2NndVAxOXlVVHZYbzJRWmVaNFE3eHdhMkhBYWJOVWpXdmNQV2M4a1FtTUFLUnE0ekdWcFUwS0llYkdPbQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487665}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.8724ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.1317ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.1333ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.3633ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000012, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000012, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000012, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000012, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000012, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000012, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1782.6905ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1317.7403ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/devices/89297/eventactions application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devices/89297/eventactions
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devices/89297/eventactions, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.1077ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.3475ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/devices/89297/eventactions
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89297/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89297/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.16ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.4075ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000005, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/eventactions/devices/{deviceId}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000005, previousRequestId: no previous request id, message: /api/devices/89297/eventactions is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000005, previousRequestId: no previous request id, message: Client has been authenticated for /api/devices/89297/eventactions
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000005, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000005, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000005, previousRequestId: no previous request id, message: /api/eventactions/devices/{deviceId} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 27.0468ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/devicetypes/homes.d.storm_variant1/events application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devicetypes/homes.d.storm_variant1/events
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devicetypes/homes.d.storm_variant1/events, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SP:00000004, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/devicetypes/{everything}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SP:00000004, previousRequestId: no previous request id, message: /api/devicetypes/homes.d.storm_variant1/events is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SP:00000004, previousRequestId: no previous request id, message: Client has been authenticated for /api/devicetypes/homes.d.storm_variant1/events
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SP:00000004, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SP:00000004, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SP:00000004, previousRequestId: no previous request id, message: /api/devicetypes/{everything} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 7.8408ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/devices/89716/eventactions application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devices/89716/eventactions
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devices/89716/eventactions, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.0661ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.296ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/devices/89716/eventactions
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89716/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89716/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.3312ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.542ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000006, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/eventactions/devices/{deviceId}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000006, previousRequestId: no previous request id, message: /api/devices/89716/eventactions is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000006, previousRequestId: no previous request id, message: Client has been authenticated for /api/devices/89716/eventactions
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000006, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000006, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000006, previousRequestId: no previous request id, message: /api/eventactions/devices/{deviceId} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 25.3767ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/devices/89716/eventactions application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devices/89716/eventactions
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devices/89716/eventactions, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.2536ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 10.4694ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/devices/89716/eventactions
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89716/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89716/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.1745ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.4266ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SP:00000005, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/eventactions/devices/{deviceId}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SP:00000005, previousRequestId: no previous request id, message: /api/devices/89716/eventactions is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SP:00000005, previousRequestId: no previous request id, message: Client has been authenticated for /api/devices/89716/eventactions
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SP:00000005, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SP:00000005, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SP:00000005, previousRequestId: no previous request id, message: /api/eventactions/devices/{deviceId} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 23.0878ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489968,"nbf":1571488168,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"dTFheFNOd3JBcTRLdG5xb0JCcDY5THpmeUxaTzd5bzNkb3pidUU2RjJFVU5GdU5GYTBGa3F5TndNQmFoUUZLWg","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488168}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.0239ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.2629ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.7502ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.9357ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SF:0000000E, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:0000000E, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:0000000E, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:0000000E, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:0000000E, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:0000000E, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2658.3573ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 PUT http://apigateway2.stage.resideo.com/api/devices/89742/control application/json; charset=utf-8 206
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489968,"nbf":1571488168,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"dTFheFNOd3JBcTRLdG5xb0JCcDY5THpmeUxaTzd5bzNkb3pidUU2RjJFVU5GdU5GYTBGa3F5TndNQmFoUUZLWg","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488168}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devices/89742/control
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devices/89742/control, , PUT
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.1541ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.5442ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/devices/89742/control
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/3/89742/E
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/3/89742/E
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.2493ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.484ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SF:0000000F, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/devices/{deviceId}/control
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:0000000F, previousRequestId: no previous request id, message: /api/devices/89742/control is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:0000000F, previousRequestId: no previous request id, message: Client has been authenticated for /api/devices/89742/control
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:0000000F, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:0000000F, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:0000000F, previousRequestId: no previous request id, message: /api/devices/{deviceId}/control route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 36.4818ms 422 application/json
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.6435ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 10.9119ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.6314ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.8479ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000007, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000007, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000007, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000007, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000007, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000007, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2505.8259ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 PUT http://apigateway2.stage.resideo.com/api/locations/237214/vacationhold application/json; charset=utf-8,application/json; charset=utf-8 290
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/vacationhold, , PUT
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000008, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000008, previousRequestId: no previous request id, message: /api/locations/237214/vacationhold is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000008, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000008, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000008, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000008, previousRequestId: no previous request id, message: /api/locations/{locationId}/vacationhold route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 468.1937ms 204 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.4409ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.8247ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.1274ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.3999ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000009, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000009, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000009, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000009, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000009, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000009, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1788.8653ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489743,"nbf":1571487943,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"T3JJYWpJMzJuZHlkNWpsdmRoTUU0aWxkU3l1SXh4VUdRMnFVcmVGT1ZmNUNGcmZycUJVNllOWW9KUEhrQTFlNg","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487943}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.1722ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.5368ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.9388ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.366ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000000C, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000000C, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000000C, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000000C, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000000C, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000000C, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1468.9299ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489465,"nbf":1571487665,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cHZjd2NndVAxOXlVVHZYbzJRWmVaNFE3eHdhMkhBYWJOVWpXdmNQV2M4a1FtTUFLUnE0ekdWcFUwS0llYkdPbQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487665}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 19.8189ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 20.0521ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.7362ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.9521ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000013, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000013, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000013, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000013, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000013, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000013, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1152.2228ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 PUT http://apigateway2.stage.resideo.com/api/locations/237214/vacationhold application/json; charset=utf-8,application/json; charset=utf-8 63
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/vacationhold, , PUT
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000000A, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000000A, previousRequestId: no previous request id, message: /api/locations/237214/vacationhold is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000000A, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000000A, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000000A, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000000A, previousRequestId: no previous request id, message: /api/locations/{locationId}/vacationhold route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 470.8468ms 204 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489968,"nbf":1571488168,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"dTFheFNOd3JBcTRLdG5xb0JCcDY5THpmeUxaTzd5bzNkb3pidUU2RjJFVU5GdU5GYTBGa3F5TndNQmFoUUZLWg","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488168}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.4048ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.6746ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.7733ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.9971ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000010, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000010, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000010, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000010, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000010, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000010, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1980.4727ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.232ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.4974ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.5439ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.8454ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000000B, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000000B, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000000B, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000000B, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000000B, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000000B, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2176.4748ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489465,"nbf":1571487665,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cHZjd2NndVAxOXlVVHZYbzJRWmVaNFE3eHdhMkhBYWJOVWpXdmNQV2M4a1FtTUFLUnE0ekdWcFUwS0llYkdPbQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487665}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.3575ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.6548ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.6123ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.8713ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000014, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000014, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000014, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000014, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000014, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SC:00000014, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1251.6883ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/vacationhold application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/vacationhold, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000000C, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000000C, previousRequestId: no previous request id, message: /api/locations/237214/vacationhold is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000000C, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000000C, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000000C, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000000C, previousRequestId: no previous request id, message: /api/locations/{locationId}/vacationhold route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 335.5579ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 PUT http://apigateway2.stage.resideo.com/api/locations/237214/vacationhold application/json; charset=utf-8,application/json; charset=utf-8 116
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/vacationhold, , PUT
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000000D, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000000D, previousRequestId: no previous request id, message: /api/locations/237214/vacationhold is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000000D, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000000D, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000000D, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000000D, previousRequestId: no previous request id, message: /api/locations/{locationId}/vacationhold route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 45.3731ms 204 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/vacationhold application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/vacationhold, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000000E, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000000E, previousRequestId: no previous request id, message: /api/locations/237214/vacationhold is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000000E, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000000E, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000000E, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000000E, previousRequestId: no previous request id, message: /api/locations/{locationId}/vacationhold route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 649.932ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489743,"nbf":1571487943,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"T3JJYWpJMzJuZHlkNWpsdmRoTUU0aWxkU3l1SXh4VUdRMnFVcmVGT1ZmNUNGcmZycUJVNllOWW9KUEhrQTFlNg","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487943}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.8123ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.1168ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.2296ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.448ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000000D, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000000D, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000000D, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000000D, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000000D, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000000D, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1050.2097ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489968,"nbf":1571488168,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"dTFheFNOd3JBcTRLdG5xb0JCcDY5THpmeUxaTzd5bzNkb3pidUU2RjJFVU5GdU5GYTBGa3F5TndNQmFoUUZLWg","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488168}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.2543ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.5489ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.9691ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.2627ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000011, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000011, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000011, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000011, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000011, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000011, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1546.932ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/devices/89716/schedules application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devices/89716/schedules
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devices/89716/schedules, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.6127ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 10.8649ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/devices/89716/schedules
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89716/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89716/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.7478ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.0638ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000000F, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/devices/{everything}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000000F, previousRequestId: no previous request id, message: /api/devices/89716/schedules is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000000F, previousRequestId: no previous request id, message: Client has been authenticated for /api/devices/89716/schedules
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000000F, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000000F, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000000F, previousRequestId: no previous request id, message: /api/devices/{everything} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 842.9415ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.0769ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.4826ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.9675ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.2654ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000010, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000010, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000010, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000010, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000010, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000010, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2475.2676ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489743,"nbf":1571487943,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"T3JJYWpJMzJuZHlkNWpsdmRoTUU0aWxkU3l1SXh4VUdRMnFVcmVGT1ZmNUNGcmZycUJVNllOWW9KUEhrQTFlNg","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487943}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.7734ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.3047ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.1389ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.5111ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000000E, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000000E, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000000E, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000000E, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000000E, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000000E, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 529.0171ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 PUT http://apigateway2.stage.resideo.com/api/locations/237214/vacationhold application/json; charset=utf-8,application/json; charset=utf-8 63
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/vacationhold, , PUT
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000011, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000011, previousRequestId: no previous request id, message: /api/locations/237214/vacationhold is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000011, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000011, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000011, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000011, previousRequestId: no previous request id, message: /api/locations/{locationId}/vacationhold route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 361.6553ms 204 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489968,"nbf":1571488168,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"dTFheFNOd3JBcTRLdG5xb0JCcDY5THpmeUxaTzd5bzNkb3pidUU2RjJFVU5GdU5GYTBGa3F5TndNQmFoUUZLWg","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488168}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.0057ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.3299ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.7447ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.0362ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000012, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000012, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000012, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000012, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000012, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000012, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 4060.1181ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 31.8589ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 32.0955ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 9.4437ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 9.6383ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000012, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000012, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000012, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000012, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000012, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000012, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 PUT http://apigateway2.stage.resideo.com/api/devices/89716/control application/json; charset=utf-8,application/json; charset=utf-8 479
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devices/89716/control
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devices/89716/control, , PUT
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.6613ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 10.957ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/devices/89716/control
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89716/E
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89716/E
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.6078ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.8785ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3ST:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/devices/{deviceId}/control
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3ST:00000001, previousRequestId: no previous request id, message: /api/devices/89716/control is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3ST:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/devices/89716/control
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3ST:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3ST:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3ST:00000001, previousRequestId: no previous request id, message: /api/devices/{deviceId}/control route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 562.2389ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 3270.5314ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/vacationhold application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/vacationhold, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters Data is not configured in AuthorizationConfigurations
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000013, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000013, previousRequestId: no previous request id, message: /api/locations/237214/vacationhold is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000013, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/vacationhold
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000013, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000013, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000013, previousRequestId: no previous request id, message: /api/locations/{locationId}/vacationhold route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 350.4422ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489743,"nbf":1571487943,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"T3JJYWpJMzJuZHlkNWpsdmRoTUU0aWxkU3l1SXh4VUdRMnFVcmVGT1ZmNUNGcmZycUJVNllOWW9KUEhrQTFlNg","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487943}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.0782ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.435ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.6242ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.0244ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000000F, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000000F, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000000F, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000000F, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000000F, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000000F, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 PUT http://apigateway2.stage.resideo.com/api/devices/89716/control application/json; charset=utf-8,application/json; charset=utf-8 474
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devices/89716/control
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devices/89716/control, , PUT
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.0196ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.2471ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/devices/89716/control
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89716/E
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89716/E
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.1491ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.3978ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000014, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/devices/{deviceId}/control
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000014, previousRequestId: no previous request id, message: /api/devices/89716/control is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000014, previousRequestId: no previous request id, message: Client has been authenticated for /api/devices/89716/control
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000014, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000014, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000014, previousRequestId: no previous request id, message: /api/devices/{deviceId}/control route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1636.9216ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 871.3261ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/devices/89716/schedules application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devices/89716/schedules
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devices/89716/schedules, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.6905ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.0736ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/devices/89716/schedules
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89716/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/3/89716/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.6444ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.0298ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000015, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/devices/{everything}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000015, previousRequestId: no previous request id, message: /api/devices/89716/schedules is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000015, previousRequestId: no previous request id, message: Client has been authenticated for /api/devices/89716/schedules
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000015, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000015, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000015, previousRequestId: no previous request id, message: /api/devices/{everything} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 780.1552ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489968,"nbf":1571488168,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"dTFheFNOd3JBcTRLdG5xb0JCcDY5THpmeUxaTzd5bzNkb3pidUU2RjJFVU5GdU5GYTBGa3F5TndNQmFoUUZLWg","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488168}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.016ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.3051ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.5515ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.8453ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000013, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000013, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000013, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000013, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000013, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000013, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1531.7323ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.6651ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.9076ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.1033ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.3217ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000016, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000016, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000016, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000016, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000016, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000016, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1982.332ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489743,"nbf":1571487943,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"T3JJYWpJMzJuZHlkNWpsdmRoTUU0aWxkU3l1SXh4VUdRMnFVcmVGT1ZmNUNGcmZycUJVNllOWW9KUEhrQTFlNg","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487943}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.216ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.5328ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.541ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.7709ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000010, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000010, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000010, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000010, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000010, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000010, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1371.9932ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489968,"nbf":1571488168,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"dTFheFNOd3JBcTRLdG5xb0JCcDY5THpmeUxaTzd5bzNkb3pidUU2RjJFVU5GdU5GYTBGa3F5TndNQmFoUUZLWg","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488168}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 17.3264ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 17.6406ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.9159ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.147ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000014, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000014, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000014, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000014, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000014, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SF:00000014, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1713.9896ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.1003ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.3396ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.5845ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.8407ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000017, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000017, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000017, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000017, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000017, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000017, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2441.9293ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489743,"nbf":1571487943,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"T3JJYWpJMzJuZHlkNWpsdmRoTUU0aWxkU3l1SXh4VUdRMnFVcmVGT1ZmNUNGcmZycUJVNllOWW9KUEhrQTFlNg","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487943}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 27.2655ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 27.709ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 5.644ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 6.0172ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000011, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000011, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000011, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000011, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000011, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000011, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2491.5119ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.2513ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.4881ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      List of location for the user
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.7421ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.9422ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      aclIds is 232949,233494,233495,233662,233664,233667,233668,233923,234156,236153
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SU:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SU:00000001, previousRequestId: no previous request id, message: /api/locations is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SU:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SU:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SU:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SU:00000001, previousRequestId: no previous request id, message: /api/locations route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling Via Query Parameters.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 39.2151ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233662/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233662/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233662/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/234156/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/234156/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/234156/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 15.9262ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 16.2159ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/234156/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/234156/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/234156/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 34.8318ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 35.084ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233662/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233662/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233662/R
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233494/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233494/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.7348ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.0828ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233494/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SV:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SV:00000001, previousRequestId: no previous request id, message: /api/locations/234156/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SV:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/234156/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.3737ms - OK
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SV:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.669ms - OK
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SV:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SV:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SU:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SU:00000002, previousRequestId: no previous request id, message: /api/locations/233662/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SU:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233662/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SU:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SU:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SU:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.5891ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.8246ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233494/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233494/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233494/R
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 43.025ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.8356ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.1111ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000001, previousRequestId: no previous request id, message: /api/locations/233494/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233494/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 66.2711ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 36.5679ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/236153/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/236153/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/236153/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.2309ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.5829ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/236153/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/236153/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/236153/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 5.0912ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.377ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000002, previousRequestId: no previous request id, message: /api/locations/236153/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/236153/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 37.4951ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233667/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233667/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233667/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 15.5487ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 15.7958ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233667/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233667/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233667/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.7967ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.0446ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000003, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000003, previousRequestId: no previous request id, message: /api/locations/233667/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000003, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233667/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000003, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000003, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000003, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 39.4747ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 PUT http://apigateway2.stage.resideo.com/api/devices/89742/control application/json; charset=utf-8 247
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devices/89742/control
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devices/89742/control, , PUT
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.0374ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.3525ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/devices/89742/control
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/3/89742/E
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/3/89742/E
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.5537ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.8342ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000004, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/devices/{deviceId}/control
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000004, previousRequestId: no previous request id, message: /api/devices/89742/control is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000004, previousRequestId: no previous request id, message: Client has been authenticated for /api/devices/89742/control
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000004, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000004, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000004, previousRequestId: no previous request id, message: /api/devices/{deviceId}/control route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 707.5087ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 43.6796ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 43.9406ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 5.0546ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.3069ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000018, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000018, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000018, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000018, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000018, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000018, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2682.6235ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489743,"nbf":1571487943,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"T3JJYWpJMzJuZHlkNWpsdmRoTUU0aWxkU3l1SXh4VUdRMnFVcmVGT1ZmNUNGcmZycUJVNllOWW9KUEhrQTFlNg","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487943}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.1933ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.4403ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 5.522ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.7257ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000012, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000012, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000012, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000012, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000012, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000012, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1926.9512ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489465,"nbf":1571487665,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cHZjd2NndVAxOXlVVHZYbzJRWmVaNFE3eHdhMkhBYWJOVWpXdmNQV2M4a1FtTUFLUnE0ekdWcFUwS0llYkdPbQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487665}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.7679ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.055ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.7362ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.9895ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T1:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T1:00000001, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T1:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T1:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T1:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T1:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1501.404ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233664/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489465,"nbf":1571487665,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cHZjd2NndVAxOXlVVHZYbzJRWmVaNFE3eHdhMkhBYWJOVWpXdmNQV2M4a1FtTUFLUnE0ekdWcFUwS0llYkdPbQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487665}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233664/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233664/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.649ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.8744ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233664/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233664/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233664/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.9531ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.1714ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T1:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T1:00000002, previousRequestId: no previous request id, message: /api/locations/233664/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T1:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233664/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T1:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T1:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T1:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/236153/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489465,"nbf":1571487665,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cHZjd2NndVAxOXlVVHZYbzJRWmVaNFE3eHdhMkhBYWJOVWpXdmNQV2M4a1FtTUFLUnE0ekdWcFUwS0llYkdPbQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487665}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/236153/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/236153/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 43.2604ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.8682ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.1075ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/236153/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/236153/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/236153/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.3373ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.6262ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000001, previousRequestId: no previous request id, message: /api/locations/236153/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/236153/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 35.9794ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233667/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489465,"nbf":1571487665,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cHZjd2NndVAxOXlVVHZYbzJRWmVaNFE3eHdhMkhBYWJOVWpXdmNQV2M4a1FtTUFLUnE0ekdWcFUwS0llYkdPbQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487665}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233667/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233667/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.2964ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233667/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233667/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233667/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.2555ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.4761ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000002, previousRequestId: no previous request id, message: /api/locations/233667/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233667/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 37.1868ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233923/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489465,"nbf":1571487665,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cHZjd2NndVAxOXlVVHZYbzJRWmVaNFE3eHdhMkhBYWJOVWpXdmNQV2M4a1FtTUFLUnE0ekdWcFUwS0llYkdPbQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487665}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233923/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233923/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.9924ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.2678ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233923/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233923/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233923/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 6.3416ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 6.5781ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000003, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000003, previousRequestId: no previous request id, message: /api/locations/233923/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000003, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233923/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000003, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000003, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000003, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 41.1123ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.631ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.9512ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.7069ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.956ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000005, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000005, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000005, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000005, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000005, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000005, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1266.0825ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.8339ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.0956ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.983ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.2383ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000019, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000019, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000019, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000019, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000019, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:00000019, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1703.483ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489465,"nbf":1571487665,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cHZjd2NndVAxOXlVVHZYbzJRWmVaNFE3eHdhMkhBYWJOVWpXdmNQV2M4a1FtTUFLUnE0ekdWcFUwS0llYkdPbQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487665}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 16.7086ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 17.0093ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.4649ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.7707ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000004, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000004, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000004, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000004, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000004, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000004, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1241.5455ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489743,"nbf":1571487943,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"T3JJYWpJMzJuZHlkNWpsdmRoTUU0aWxkU3l1SXh4VUdRMnFVcmVGT1ZmNUNGcmZycUJVNllOWW9KUEhrQTFlNg","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487943}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.4049ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.6672ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.0164ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.2906ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000013, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000013, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000013, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000013, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000013, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000013, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2024.14ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 14.3909ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 14.7059ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 5.478ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.734ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000006, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000006, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000006, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000006, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000006, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000006, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1292.3889ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.1623ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.4457ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.1904ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.4215ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000001A, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000001A, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000001A, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000001A, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000001A, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000001A, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2358.2485ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489465,"nbf":1571487665,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cHZjd2NndVAxOXlVVHZYbzJRWmVaNFE3eHdhMkhBYWJOVWpXdmNQV2M4a1FtTUFLUnE0ekdWcFUwS0llYkdPbQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487665}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.0879ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.4115ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.8789ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.2135ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000005, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000005, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000005, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000005, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000005, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000005, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1074.7995ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489743,"nbf":1571487943,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"T3JJYWpJMzJuZHlkNWpsdmRoTUU0aWxkU3l1SXh4VUdRMnFVcmVGT1ZmNUNGcmZycUJVNllOWW9KUEhrQTFlNg","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487943}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.9091ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 14.1661ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.7385ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.9788ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000014, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000014, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000014, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000014, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000014, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000014, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1689.0039ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 14.4933ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 14.7304ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 5.4951ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.7222ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000007, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000007, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000007, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000007, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000007, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000007, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1366.7292ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/devices/89742/schedules application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489465,"nbf":1571487665,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cHZjd2NndVAxOXlVVHZYbzJRWmVaNFE3eHdhMkhBYWJOVWpXdmNQV2M4a1FtTUFLUnE0ekdWcFUwS0llYkdPbQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487665}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devices/89742/schedules
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devices/89742/schedules, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 14.0244ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 14.2822ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/devices/89742/schedules
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/3/89742/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/3/89742/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.516ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.7677ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000006, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/devices/{everything}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000006, previousRequestId: no previous request id, message: /api/devices/89742/schedules is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000006, previousRequestId: no previous request id, message: Client has been authenticated for /api/devices/89742/schedules
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000006, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000006, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000006, previousRequestId: no previous request id, message: /api/devices/{everything} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 841.6667ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.5416ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.7801ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.704ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.8905ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000001B, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000001B, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000001B, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000001B, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000001B, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000001B, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2266.2252ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489743,"nbf":1571487943,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"T3JJYWpJMzJuZHlkNWpsdmRoTUU0aWxkU3l1SXh4VUdRMnFVcmVGT1ZmNUNGcmZycUJVNllOWW9KUEhrQTFlNg","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487943}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 14.5117ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 14.8871ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.9836ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.3406ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000015, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000015, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000015, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000015, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000015, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000015, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2022.4795ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489465,"nbf":1571487665,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cHZjd2NndVAxOXlVVHZYbzJRWmVaNFE3eHdhMkhBYWJOVWpXdmNQV2M4a1FtTUFLUnE0ekdWcFUwS0llYkdPbQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487665}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.9749ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.2511ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.3244ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.5877ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000007, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000007, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000007, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000007, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000007, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000007, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 14.7189ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 15.0242ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 5.335ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.6578ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000008, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000008, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000008, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000008, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000008, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000008, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1485.9112ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1178.2272ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 21.2859ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 21.5351ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.8275ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.0738ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000001C, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000001C, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000001C, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000001C, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000001C, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3SQ:0000001C, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2584.3262ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489743,"nbf":1571487943,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"T3JJYWpJMzJuZHlkNWpsdmRoTUU0aWxkU3l1SXh4VUdRMnFVcmVGT1ZmNUNGcmZycUJVNllOWW9KUEhrQTFlNg","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487943}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 17.8987ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 18.1755ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.1746ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.4081ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000016, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000016, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000016, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000016, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000016, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000016, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1941.2589ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489465,"nbf":1571487665,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cHZjd2NndVAxOXlVVHZYbzJRWmVaNFE3eHdhMkhBYWJOVWpXdmNQV2M4a1FtTUFLUnE0ekdWcFUwS0llYkdPbQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487665}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.2498ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.4862ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.3579ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.593ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000008, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000008, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000008, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000008, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000008, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000008, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1316.3898ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.2366ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.5318ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.2458ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.5033ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000009, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000009, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000009, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000009, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000009, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:00000009, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1377.664ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.6706ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.01ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.4151ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.7573ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000001, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1969.2154ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489465,"nbf":1571487665,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cHZjd2NndVAxOXlVVHZYbzJRWmVaNFE3eHdhMkhBYWJOVWpXdmNQV2M4a1FtTUFLUnE0ekdWcFUwS0llYkdPbQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487665}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.4115ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.6653ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.9941ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.1918ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000009, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000009, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000009, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000009, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000009, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000009, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1315.6848ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489743,"nbf":1571487943,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"T3JJYWpJMzJuZHlkNWpsdmRoTUU0aWxkU3l1SXh4VUdRMnFVcmVGT1ZmNUNGcmZycUJVNllOWW9KUEhrQTFlNg","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487943}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.4827ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.8741ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.8207ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.1065ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000017, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000017, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000017, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000017, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000017, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000017, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1873.0544ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.3196ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.7063ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 5.4351ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.8402ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T0:0000000A, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:0000000A, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:0000000A, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:0000000A, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:0000000A, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:0000000A, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1144.7411ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.9709ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.3295ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.9888ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.3223ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000002, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2591.6032ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489465,"nbf":1571487665,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cHZjd2NndVAxOXlVVHZYbzJRWmVaNFE3eHdhMkhBYWJOVWpXdmNQV2M4a1FtTUFLUnE0ekdWcFUwS0llYkdPbQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487665}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.7034ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 14.0221ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.9624ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.267ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T2:0000000A, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:0000000A, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:0000000A, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:0000000A, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:0000000A, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:0000000A, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1269.6881ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489743,"nbf":1571487943,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"T3JJYWpJMzJuZHlkNWpsdmRoTUU0aWxkU3l1SXh4VUdRMnFVcmVGT1ZmNUNGcmZycUJVNllOWW9KUEhrQTFlNg","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487943}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 17.5699ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 17.8603ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 5.154ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.416ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000018, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000018, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000018, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000018, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000018, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000018, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1816.2193ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.9967ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 14.2794ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.9751ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.2345ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T0:0000000B, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:0000000B, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:0000000B, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:0000000B, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:0000000B, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:0000000B, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1389.5104ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.1396ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.4777ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.273ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.6792ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000003, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000003, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000003, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000003, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000003, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000003, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2554.599ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489465,"nbf":1571487665,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cHZjd2NndVAxOXlVVHZYbzJRWmVaNFE3eHdhMkhBYWJOVWpXdmNQV2M4a1FtTUFLUnE0ekdWcFUwS0llYkdPbQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487665}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.8587ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.1232ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.8466ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.0937ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T2:0000000B, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:0000000B, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:0000000B, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:0000000B, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:0000000B, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:0000000B, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1093.1627ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489743,"nbf":1571487943,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"T3JJYWpJMzJuZHlkNWpsdmRoTUU0aWxkU3l1SXh4VUdRMnFVcmVGT1ZmNUNGcmZycUJVNllOWW9KUEhrQTFlNg","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487943}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.7755ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.0837ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.6718ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.0388ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000019, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000019, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000019, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000019, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000019, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:00000019, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1540.431ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.0939ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.3566ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.6472ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.9515ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T0:0000000C, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:0000000C, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:0000000C, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:0000000C, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:0000000C, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:0000000C, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1218.1107ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.1573ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.441ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.872ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.1111ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000004, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000004, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000004, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000004, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000004, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000004, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2451.5343ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489465,"nbf":1571487665,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cHZjd2NndVAxOXlVVHZYbzJRWmVaNFE3eHdhMkhBYWJOVWpXdmNQV2M4a1FtTUFLUnE0ekdWcFUwS0llYkdPbQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487665}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.0335ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.3095ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.8911ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.1236ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T2:0000000C, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:0000000C, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:0000000C, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:0000000C, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:0000000C, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:0000000C, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1215.6738ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489743,"nbf":1571487943,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"T3JJYWpJMzJuZHlkNWpsdmRoTUU0aWxkU3l1SXh4VUdRMnFVcmVGT1ZmNUNGcmZycUJVNllOWW9KUEhrQTFlNg","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487943}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 16.1449ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 16.5833ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 9.4642ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 9.7471ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000001A, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000001A, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000001A, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000001A, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000001A, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000001A, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2278.6743ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.7038ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.9574ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 5.5371ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.8464ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T0:0000000D, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:0000000D, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:0000000D, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:0000000D, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:0000000D, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:0000000D, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1083.8312ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.6358ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.9531ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.791ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.0367ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000005, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000005, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000005, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000005, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000005, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000005, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2546.4376ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489465,"nbf":1571487665,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cHZjd2NndVAxOXlVVHZYbzJRWmVaNFE3eHdhMkhBYWJOVWpXdmNQV2M4a1FtTUFLUnE0ekdWcFUwS0llYkdPbQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487665}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 15.2112ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 15.5653ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 5.3058ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.5868ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T2:0000000D, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:0000000D, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:0000000D, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:0000000D, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:0000000D, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:0000000D, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1430.6013ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489743,"nbf":1571487943,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"T3JJYWpJMzJuZHlkNWpsdmRoTUU0aWxkU3l1SXh4VUdRMnFVcmVGT1ZmNUNGcmZycUJVNllOWW9KUEhrQTFlNg","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487943}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.0683ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.3066ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.9664ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.1541ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000001B, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000001B, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000001B, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000001B, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000001B, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000001B, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2257.4365ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.8265ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.1009ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.6205ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.8702ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T0:0000000E, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:0000000E, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:0000000E, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:0000000E, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:0000000E, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T0:0000000E, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1184.9496ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 14.5183ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 14.8104ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      List of location for the user
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 6.3707ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 6.6473ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      aclIds is 232949,233494,233495,233662,233664,233667,233668,233923,234156,236153
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T4:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T4:00000001, previousRequestId: no previous request id, message: /api/locations is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T4:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T4:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T4:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T4:00000001, previousRequestId: no previous request id, message: /api/locations route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling Via Query Parameters.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 85.1029ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233664/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233664/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233664/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/234156/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/234156/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/234156/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.6425ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.9527ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233664/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233664/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233664/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 6.4205ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 6.6614ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T4:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T4:00000002, previousRequestId: no previous request id, message: /api/locations/233664/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T4:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233664/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T4:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T4:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T4:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/236153/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/236153/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/236153/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.4296ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.7012ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/236153/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/236153/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/236153/R
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 44.0383ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233495/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233495/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233495/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 5.1607ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.4515ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T6:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T6:00000001, previousRequestId: no previous request id, message: /api/locations/236153/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T6:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/236153/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T6:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T6:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T6:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.4926ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.6886ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233495/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233495/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233495/R
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 38.4443ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.1362ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.381ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T4:00000003, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T4:00000003, previousRequestId: no previous request id, message: /api/locations/233495/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T4:00000003, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233495/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T4:00000003, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T4:00000003, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T4:00000003, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 35.3943ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 105.8622ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 106.1124ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/234156/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/234156/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/234156/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.9328ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.1664ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T5:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T5:00000001, previousRequestId: no previous request id, message: /api/locations/234156/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T5:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/234156/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T5:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T5:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T5:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 130.276ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233662/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233662/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233662/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.9105ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.2133ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233662/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233662/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233662/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.827ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.1146ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T5:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T5:00000002, previousRequestId: no previous request id, message: /api/locations/233662/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T5:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233662/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T5:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T5:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T5:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 38.2184ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.9918ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.2352ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.8083ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.0486ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000006, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000006, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000006, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000006, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000006, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000006, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2070.6566ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 PUT http://apigateway2.stage.resideo.com/api/devices/89742/control application/json; charset=utf-8 108
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devices/89742/control
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devices/89742/control, , PUT
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.2441ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.5114ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/devices/89742/control
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/3/89742/E
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/3/89742/E
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 6.0537ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 6.2553ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T5:00000003, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/devices/{deviceId}/control
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T5:00000003, previousRequestId: no previous request id, message: /api/devices/89742/control is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T5:00000003, previousRequestId: no previous request id, message: Client has been authenticated for /api/devices/89742/control
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T5:00000003, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T5:00000003, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T5:00000003, previousRequestId: no previous request id, message: /api/devices/{deviceId}/control route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 505.6864ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489465,"nbf":1571487665,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cHZjd2NndVAxOXlVVHZYbzJRWmVaNFE3eHdhMkhBYWJOVWpXdmNQV2M4a1FtTUFLUnE0ekdWcFUwS0llYkdPbQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487665}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 14.4651ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 14.7642ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 5.6653ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.9008ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T2:0000000E, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:0000000E, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:0000000E, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:0000000E, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:0000000E, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:0000000E, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1304.7477ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489743,"nbf":1571487943,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"T3JJYWpJMzJuZHlkNWpsdmRoTUU0aWxkU3l1SXh4VUdRMnFVcmVGT1ZmNUNGcmZycUJVNllOWW9KUEhrQTFlNg","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487943}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.8485ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.123ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.4036ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.6276ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000001C, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000001C, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000001C, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000001C, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000001C, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000001C, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1659.4108ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.5583ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.8112ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.656ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.9095ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T5:00000004, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T5:00000004, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T5:00000004, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T5:00000004, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T5:00000004, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T5:00000004, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1659.8445ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.8736ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.1425ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.224ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.4855ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000007, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000007, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000007, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000007, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000007, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000007, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2390.7322ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489465,"nbf":1571487665,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cHZjd2NndVAxOXlVVHZYbzJRWmVaNFE3eHdhMkhBYWJOVWpXdmNQV2M4a1FtTUFLUnE0ekdWcFUwS0llYkdPbQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487665}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.1215ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.4844ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.519ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.8136ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T2:0000000F, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:0000000F, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:0000000F, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:0000000F, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:0000000F, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:0000000F, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1390.7324ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.3459ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.7166ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.8059ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.0263ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T7:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T7:00000001, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T7:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T7:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T7:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T7:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489743,"nbf":1571487943,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"T3JJYWpJMzJuZHlkNWpsdmRoTUU0aWxkU3l1SXh4VUdRMnFVcmVGT1ZmNUNGcmZycUJVNllOWW9KUEhrQTFlNg","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487943}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.789ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.0696ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.8128ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.0986ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000001D, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000001D, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000001D, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000001D, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000001D, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3S8:0000001D, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1344.2764ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233923/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233923/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233923/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 14.1847ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 14.533ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233923/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233923/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233923/R
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233495/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233495/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233495/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.6105ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.8949ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T7:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T7:00000002, previousRequestId: no previous request id, message: /api/locations/233923/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T7:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233923/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T7:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T7:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T7:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.4126ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.6652ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233495/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233495/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233495/R
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233494/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233494/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233494/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.5591ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.8189ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T8:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T8:00000001, previousRequestId: no previous request id, message: /api/locations/233495/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T8:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233495/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T8:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T8:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T8:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 49.2009ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.732ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.0478ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233494/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233494/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233494/R
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 37.6286ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.3666ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.6584ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T9:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T9:00000001, previousRequestId: no previous request id, message: /api/locations/233494/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T9:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233494/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T9:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T9:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T9:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 37.8264ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233667/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233667/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233667/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.7526ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.0907ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233667/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233667/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233667/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.6929ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.9302ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T9:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T9:00000002, previousRequestId: no previous request id, message: /api/locations/233667/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T9:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233667/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T9:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T9:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T9:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1280.3494ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 36.2797ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.0738ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.4596ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.7912ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.0349ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000008, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000008, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000008, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000008, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000008, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000008, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2684.0158ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.979ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.2595ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.6101ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.9056ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T9:00000003, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T9:00000003, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T9:00000003, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T9:00000003, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T9:00000003, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T9:00000003, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1161.012ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489465,"nbf":1571487665,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cHZjd2NndVAxOXlVVHZYbzJRWmVaNFE3eHdhMkhBYWJOVWpXdmNQV2M4a1FtTUFLUnE0ekdWcFUwS0llYkdPbQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487665}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.8713ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 14.1945ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 6.5889ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 6.9126ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000010, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000010, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000010, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000010, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000010, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000010, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1324.4352ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 PUT http://apigateway2.stage.resideo.com/api/devices/89742/control application/json; charset=utf-8 247
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devices/89742/control
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devices/89742/control, , PUT
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.863ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.1045ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/devices/89742/control
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/3/89742/E
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/3/89742/E
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.3198ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.5937ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T9:00000004, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/devices/{deviceId}/control
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T9:00000004, previousRequestId: no previous request id, message: /api/devices/89742/control is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T9:00000004, previousRequestId: no previous request id, message: Client has been authenticated for /api/devices/89742/control
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T9:00000004, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T9:00000004, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T9:00000004, previousRequestId: no previous request id, message: /api/devices/{deviceId}/control route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 509.4716ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489743,"nbf":1571487943,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"T3JJYWpJMzJuZHlkNWpsdmRoTUU0aWxkU3l1SXh4VUdRMnFVcmVGT1ZmNUNGcmZycUJVNllOWW9KUEhrQTFlNg","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487943}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.2926ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.5473ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.2788ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.496ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TA:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TA:00000001, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TA:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TA:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TA:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TA:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1517.8132ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 PUT http://apigateway2.stage.resideo.com/api/devices/89742/control application/json; charset=utf-8 247
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devices/89742/control
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devices/89742/control, , PUT
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.8989ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.1323ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/devices/89742/control
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/3/89742/E
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/3/89742/E
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.3729ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.5618ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T9:00000005, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/devices/{deviceId}/control
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T9:00000005, previousRequestId: no previous request id, message: /api/devices/89742/control is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T9:00000005, previousRequestId: no previous request id, message: Client has been authenticated for /api/devices/89742/control
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T9:00000005, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T9:00000005, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T9:00000005, previousRequestId: no previous request id, message: /api/devices/{deviceId}/control route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 725.6367ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.318ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.5581ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.671ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.9093ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000009, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000009, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000009, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000009, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000009, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000009, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2433.3759ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489465,"nbf":1571487665,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cHZjd2NndVAxOXlVVHZYbzJRWmVaNFE3eHdhMkhBYWJOVWpXdmNQV2M4a1FtTUFLUnE0ekdWcFUwS0llYkdPbQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487665}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 14.252ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 14.5995ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 5.4736ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.7507ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000011, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000011, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000011, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000011, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000011, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T2:00000011, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1187.9827ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489743,"nbf":1571487943,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"T3JJYWpJMzJuZHlkNWpsdmRoTUU0aWxkU3l1SXh4VUdRMnFVcmVGT1ZmNUNGcmZycUJVNllOWW9KUEhrQTFlNg","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487943}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.8822ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 14.0872ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.6051ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.8904ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TA:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TA:00000002, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TA:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TA:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TA:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TA:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.8207ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.0855ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.4213ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.6828ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T9:00000006, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T9:00000006, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T9:00000006, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T9:00000006, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T9:00000006, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T9:00000006, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1866.3415ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 752.3758ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.0473ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.3372ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.0586ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.2915ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T3:0000000A, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:0000000A, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:0000000A, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:0000000A, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:0000000A, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:0000000A, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2685.3733ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489743,"nbf":1571487943,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"T3JJYWpJMzJuZHlkNWpsdmRoTUU0aWxkU3l1SXh4VUdRMnFVcmVGT1ZmNUNGcmZycUJVNllOWW9KUEhrQTFlNg","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487943}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 14.5605ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 14.9176ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.7511ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.075ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TA:00000003, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TA:00000003, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TA:00000003, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TA:00000003, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TA:00000003, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TA:00000003, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1358.5893ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 15.1038ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 15.359ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.7526ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.034ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TB:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TB:00000001, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TB:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TB:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TB:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TB:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 932.9603ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.8379ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 14.0868ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.6997ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.916ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T3:0000000B, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:0000000B, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:0000000B, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:0000000B, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:0000000B, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:0000000B, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2390.7723ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489743,"nbf":1571487943,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"T3JJYWpJMzJuZHlkNWpsdmRoTUU0aWxkU3l1SXh4VUdRMnFVcmVGT1ZmNUNGcmZycUJVNllOWW9KUEhrQTFlNg","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487943}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.9052ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.211ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 6.2496ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 6.5281ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TA:00000004, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TA:00000004, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TA:00000004, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TA:00000004, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TA:00000004, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TA:00000004, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 29.604ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 29.8744ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.9045ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.1138ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TB:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TB:00000002, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TB:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TB:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TB:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TB:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1887.3927ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 796.0233ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.1018ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.3538ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.4794ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.7442ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TC:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TC:00000001, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TC:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TC:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TC:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TC:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1596.3226ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233662/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233662/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233662/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.5169ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.8846ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233667/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233662/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233662/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233662/R
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233667/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233667/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.8331ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.0218ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TC:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TC:00000002, previousRequestId: no previous request id, message: /api/locations/233662/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TC:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233662/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TC:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TC:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TC:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.0181ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.282ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233667/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233667/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233667/R
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 36.0169ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233923/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.9626ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233923/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.2351ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233923/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TD:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TD:00000001, previousRequestId: no previous request id, message: /api/locations/233667/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TD:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233667/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TD:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TD:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TD:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.1333ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.4275ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233923/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233923/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233923/R
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 40.1484ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.9961ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.237ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TE:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TE:00000001, previousRequestId: no previous request id, message: /api/locations/233923/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TE:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233923/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TE:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TE:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TE:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 33.7991ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/236153/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/236153/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/236153/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.0196ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.2919ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/236153/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/236153/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/236153/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.767ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.9823ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TE:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TE:00000002, previousRequestId: no previous request id, message: /api/locations/236153/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TE:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/236153/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TE:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TE:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TE:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 37.483ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489563,"nbf":1571487763,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"52GL7kMV2FmR5g","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487763}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.7287ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.0676ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.2932ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.5133ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T3:0000000C, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:0000000C, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:0000000C, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:0000000C, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:0000000C, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:0000000C, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1937.9046ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.7628ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 14.0931ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.8686ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.09ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TE:00000003, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TE:00000003, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TE:00000003, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TE:00000003, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TE:00000003, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TE:00000003, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 514.7961ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489743,"nbf":1571487943,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"T3JJYWpJMzJuZHlkNWpsdmRoTUU0aWxkU3l1SXh4VUdRMnFVcmVGT1ZmNUNGcmZycUJVNllOWW9KUEhrQTFlNg","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487943}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.0923ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.3695ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 5.2377ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.4576ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000001, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1384.7791ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 15.1289ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 15.478ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.5817ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.0106ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TE:00000004, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TE:00000004, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TE:00000004, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TE:00000004, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TE:00000004, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TE:00000004, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1628.0486ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571491390,"nbf":1571489590,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"G1_3M9Yq8JMSQw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571489590}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.926ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.2245ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.7138ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.9848ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T3:0000000D, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:0000000D, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:0000000D, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:0000000D, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:0000000D, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:0000000D, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1879.3574ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.5774ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.807ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.135ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.4258ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TE:00000005, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TE:00000005, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TE:00000005, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TE:00000005, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TE:00000005, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TE:00000005, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1780.8525ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489743,"nbf":1571487943,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"T3JJYWpJMzJuZHlkNWpsdmRoTUU0aWxkU3l1SXh4VUdRMnFVcmVGT1ZmNUNGcmZycUJVNllOWW9KUEhrQTFlNg","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487943}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 14.6282ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 14.9829ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.5853ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.8933ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000002, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1459.4942ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571491390,"nbf":1571489590,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"G1_3M9Yq8JMSQw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571489590}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 15.7299ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 15.9809ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.524ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.7594ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T3:0000000E, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:0000000E, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:0000000E, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:0000000E, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:0000000E, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:0000000E, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2103.1752ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.2831ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.5123ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.245ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.528ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TE:00000006, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TE:00000006, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TE:00000006, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TE:00000006, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TE:00000006, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TE:00000006, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1862.3755ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571489743,"nbf":1571487943,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"T3JJYWpJMzJuZHlkNWpsdmRoTUU0aWxkU3l1SXh4VUdRMnFVcmVGT1ZmNUNGcmZycUJVNllOWW9KUEhrQTFlNg","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571487943}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.9633ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.3376ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 5.0557ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.6053ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000003, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000003, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000003, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000003, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000003, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000003, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1157.6389ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571491390,"nbf":1571489590,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"G1_3M9Yq8JMSQw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571489590}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.8172ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.0594ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.7305ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.9908ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T3:0000000F, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:0000000F, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:0000000F, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:0000000F, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:0000000F, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:0000000F, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2243.4461ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 16.2967ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 16.5673ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 5.4168ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.618ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TG:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TG:00000001, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TG:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TG:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TG:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TG:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1620.6762ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233668/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233668/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233668/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233664/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233664/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233664/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.4002ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.0829ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233664/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233664/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233664/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 2.9812ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.2143ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TH:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TH:00000001, previousRequestId: no previous request id, message: /api/locations/233664/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TH:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233664/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TH:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TH:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TH:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/234156/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/234156/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/234156/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 64.6922ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 64.9788ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233668/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233668/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233668/R
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 45.209ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.3657ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.7045ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TG:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TG:00000002, previousRequestId: no previous request id, message: /api/locations/233668/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TG:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233668/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TG:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TG:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TG:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 90.6601ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 109.7458ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 110.0572ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/234156/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/234156/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/234156/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.5139ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.7454ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000001, previousRequestId: no previous request id, message: /api/locations/234156/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/234156/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 132.9455ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233662/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233662/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233662/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.7306ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 10.9514ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233662/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233662/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233662/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.4592ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.7123ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000002, previousRequestId: no previous request id, message: /api/locations/233662/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233662/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 33.0072ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571491572,"nbf":1571489772,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"eFdqdElyMEpLWDVyMk14bHhKQWVwNWhYdG5NTHppdEZnRjhrNWVJWjBhbkNnN0pFVFIyWWJVWDk1dTYyaEhhOA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571489772}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.2637ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.57ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.1652ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.8052ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000004, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000004, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000004, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000004, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000004, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000004, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2045.8634ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.1831ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.4026ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.2337ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.4233ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000003, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000003, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000003, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000003, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000003, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000003, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1065.9495ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571491390,"nbf":1571489590,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"G1_3M9Yq8JMSQw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571489590}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.6049ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.8464ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.532ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.74ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000010, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000010, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000010, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000010, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000010, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000010, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2306.7523ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.7774ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.0691ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.6624ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.862ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000004, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000004, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000004, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000004, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000004, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000004, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1176.8994ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571491572,"nbf":1571489772,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"eFdqdElyMEpLWDVyMk14bHhKQWVwNWhYdG5NTHppdEZnRjhrNWVJWjBhbkNnN0pFVFIyWWJVWDk1dTYyaEhhOA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571489772}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.105ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.3452ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.5981ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.8047ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000005, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000005, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000005, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000005, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000005, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000005, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2098.8848ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.5722ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.8075ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.573ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.7952ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000005, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000005, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000005, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000005, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000005, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000005, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1793.9511ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571491390,"nbf":1571489590,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"G1_3M9Yq8JMSQw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571489590}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.7536ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.0946ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.9214ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.2104ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000011, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000011, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000011, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000011, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000011, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000011, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2074.0389ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571491572,"nbf":1571489772,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"eFdqdElyMEpLWDVyMk14bHhKQWVwNWhYdG5NTHppdEZnRjhrNWVJWjBhbkNnN0pFVFIyWWJVWDk1dTYyaEhhOA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571489772}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.6445ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 10.9002ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.0647ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.3437ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000006, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000006, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000006, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000006, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000006, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000006, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2111.9961ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.8863ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.1311ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.5251ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.766ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000006, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000006, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000006, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000006, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000006, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000006, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1322.0273ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571491390,"nbf":1571489590,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"G1_3M9Yq8JMSQw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571489590}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.226ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 10.4626ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.1477ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.3844ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000012, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000012, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000012, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000012, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000012, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000012, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2246.0674ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571491572,"nbf":1571489772,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"eFdqdElyMEpLWDVyMk14bHhKQWVwNWhYdG5NTHppdEZnRjhrNWVJWjBhbkNnN0pFVFIyWWJVWDk1dTYyaEhhOA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571489772}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.2486ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.4966ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.4502ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.6377ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000007, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000007, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000007, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000007, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000007, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000007, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2257.6528ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.5162ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.7441ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.3998ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.6702ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000007, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000007, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000007, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000007, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000007, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000007, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1286.8805ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571491390,"nbf":1571489590,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"G1_3M9Yq8JMSQw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571489590}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.954ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.2358ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.8869ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.1599ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000013, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000013, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000013, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000013, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000013, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000013, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1263.3222ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571491572,"nbf":1571489772,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"eFdqdElyMEpLWDVyMk14bHhKQWVwNWhYdG5NTHppdEZnRjhrNWVJWjBhbkNnN0pFVFIyWWJVWDk1dTYyaEhhOA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571489772}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.6874ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.9949ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 7.0234ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 7.307ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000008, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000008, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000008, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000008, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000008, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000008, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1950.3842ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.1542ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 10.4019ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.2405ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.4474ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000008, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000008, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000008, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000008, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000008, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000008, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1389.1331ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571491390,"nbf":1571489590,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"G1_3M9Yq8JMSQw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571489590}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.986ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.277ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.8134ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.9997ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000014, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000014, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000014, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000014, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000014, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000014, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2108.3726ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571491572,"nbf":1571489772,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"eFdqdElyMEpLWDVyMk14bHhKQWVwNWhYdG5NTHppdEZnRjhrNWVJWjBhbkNnN0pFVFIyWWJVWDk1dTYyaEhhOA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571489772}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.6316ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.8799ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.5885ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.8856ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000009, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000009, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000009, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000009, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000009, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000009, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1943.6307ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.2752ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.5104ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.246ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.4632ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000009, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000009, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000009, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000009, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000009, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:00000009, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1177.7459ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571491390,"nbf":1571489590,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"G1_3M9Yq8JMSQw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571489590}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.045ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.2761ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.4192ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.6249ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000015, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000015, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000015, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000015, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000015, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000015, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2086.2538ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571491572,"nbf":1571489772,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"eFdqdElyMEpLWDVyMk14bHhKQWVwNWhYdG5NTHppdEZnRjhrNWVJWjBhbkNnN0pFVFIyWWJVWDk1dTYyaEhhOA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571489772}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.1486ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.3758ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.3262ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.5929ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TF:0000000A, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:0000000A, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:0000000A, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:0000000A, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:0000000A, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:0000000A, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1931.5567ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.7691ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.9998ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.4643ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.6795ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TI:0000000A, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:0000000A, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:0000000A, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:0000000A, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:0000000A, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:0000000A, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1422.0501ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571491390,"nbf":1571489590,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"G1_3M9Yq8JMSQw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571489590}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.2346ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.4672ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.2898ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.5045ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000016, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000016, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000016, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000016, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000016, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3T3:00000016, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1981.4741ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571491572,"nbf":1571489772,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"eFdqdElyMEpLWDVyMk14bHhKQWVwNWhYdG5NTHppdEZnRjhrNWVJWjBhbkNnN0pFVFIyWWJVWDk1dTYyaEhhOA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571489772}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.4175ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.6452ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.7312ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.9561ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TF:0000000B, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:0000000B, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:0000000B, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:0000000B, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:0000000B, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:0000000B, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2404.7888ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 42.5386ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 42.9039ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.0618ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.3751ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TI:0000000B, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:0000000B, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:0000000B, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:0000000B, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:0000000B, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:0000000B, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1377.9968ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571491390,"nbf":1571489590,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"G1_3M9Yq8JMSQw","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571489590}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.9783ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.2294ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.8475ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.129ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TJ:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TJ:00000001, previousRequestId: no previous request id, message: /api/locations/237214/devices is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TJ:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TJ:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TJ:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TJ:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1643.7912ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571491572,"nbf":1571489772,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"eFdqdElyMEpLWDVyMk14bHhKQWVwNWhYdG5NTHppdEZnRjhrNWVJWjBhbkNnN0pFVFIyWWJVWDk1dTYyaEhhOA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571489772}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.6325ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.9129ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.274ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.4905ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TF:0000000C, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:0000000C, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:0000000C, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:0000000C, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:0000000C, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:0000000C, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2043.4688ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.184ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.437ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.6378ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.824ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TI:0000000C, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:0000000C, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:0000000C, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:0000000C, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:0000000C, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:0000000C, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1440.6546ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571491572,"nbf":1571489772,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"eFdqdElyMEpLWDVyMk14bHhKQWVwNWhYdG5NTHppdEZnRjhrNWVJWjBhbkNnN0pFVFIyWWJVWDk1dTYyaEhhOA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571489772}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.1856ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.5279ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.0464ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.38ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TF:0000000D, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:0000000D, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:0000000D, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:0000000D, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:0000000D, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:0000000D, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1822.4907ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.029ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.3ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.61ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.8393ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TI:0000000D, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:0000000D, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:0000000D, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:0000000D, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:0000000D, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:0000000D, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2105.2877ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571491572,"nbf":1571489772,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"eFdqdElyMEpLWDVyMk14bHhKQWVwNWhYdG5NTHppdEZnRjhrNWVJWjBhbkNnN0pFVFIyWWJVWDk1dTYyaEhhOA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571489772}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.1362ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.4084ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.4756ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.7238ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TF:0000000E, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:0000000E, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:0000000E, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:0000000E, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:0000000E, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:0000000E, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1581.3865ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571490400,"nbf":1571488600,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"cVdxR0tqNVVnOHR3RnFucE9FSWFnZ01VbklxeHhLUmdEdWZlVnhxNFc0bTNQMVlocVo0ZWg2UnZncXJ0UjRMMA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571488600}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.6539ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.8913ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.4798ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.6659ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TI:0000000E, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:0000000E, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:0000000E, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:0000000E, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:0000000E, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TI:0000000E, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2031.7601ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571492209,"nbf":1571490409,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"UmlKcnJJekFRVDVwcE1uV0h1MTdadGNxUlFXaU5HdUkyQmg1eEZSZmxWWlAzVmdRWDI2b1V1UHR5VUt2cWFjQQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571490409}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 14.8058ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 15.0676ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      List of location for the user
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.7048ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.9842ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      aclIds is 232949,233494,233495,233662,233664,233667,233668,233923,234156,236153
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TK:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TK:00000001, previousRequestId: no previous request id, message: /api/locations is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TK:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TK:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TK:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TK:00000001, previousRequestId: no previous request id, message: /api/locations route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling Via Query Parameters.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 80.1381ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233494/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571492209,"nbf":1571490409,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"UmlKcnJJekFRVDVwcE1uV0h1MTdadGNxUlFXaU5HdUkyQmg1eEZSZmxWWlAzVmdRWDI2b1V1UHR5VUt2cWFjQQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571490409}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233494/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233494/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233667/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571492209,"nbf":1571490409,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"UmlKcnJJekFRVDVwcE1uV0h1MTdadGNxUlFXaU5HdUkyQmg1eEZSZmxWWlAzVmdRWDI2b1V1UHR5VUt2cWFjQQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571490409}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233667/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233667/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233923/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571492209,"nbf":1571490409,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"UmlKcnJJekFRVDVwcE1uV0h1MTdadGNxUlFXaU5HdUkyQmg1eEZSZmxWWlAzVmdRWDI2b1V1UHR5VUt2cWFjQQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571490409}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233923/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233923/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/236153/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571492209,"nbf":1571490409,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"UmlKcnJJekFRVDVwcE1uV0h1MTdadGNxUlFXaU5HdUkyQmg1eEZSZmxWWlAzVmdRWDI2b1V1UHR5VUt2cWFjQQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571490409}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/236153/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/236153/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.8884ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.2634ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/236153/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/236153/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/236153/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 9.8815ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 10.2154ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TN:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TN:00000001, previousRequestId: no previous request id, message: /api/locations/236153/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TN:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/236153/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TN:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TN:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TN:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 44.7111ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 112.6153ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 113.0209ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233494/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233494/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233494/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.825ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.1311ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 106.8222ms - OK
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TK:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TK:00000002, previousRequestId: no previous request id, message: /api/locations/233494/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 107.2812ms - OK
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TK:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233494/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TK:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TK:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TK:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233667/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233667/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233667/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 5.263ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.6111ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TL:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TL:00000001, previousRequestId: no previous request id, message: /api/locations/233667/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TL:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233667/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TL:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TL:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TL:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 138.2559ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 103.6006ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 103.9473ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233923/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233923/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233923/R
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 135.5056ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.8738ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.0979ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TM:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TM:00000001, previousRequestId: no previous request id, message: /api/locations/233923/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TM:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233923/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TM:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TM:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TM:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 127.4033ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/234156/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571492209,"nbf":1571490409,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"UmlKcnJJekFRVDVwcE1uV0h1MTdadGNxUlFXaU5HdUkyQmg1eEZSZmxWWlAzVmdRWDI2b1V1UHR5VUt2cWFjQQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571490409}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/234156/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/234156/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.1256ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.3656ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/234156/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/234156/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/234156/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 5.2586ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.4952ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TM:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TM:00000002, previousRequestId: no previous request id, message: /api/locations/234156/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TM:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/234156/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TM:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TM:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TM:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 40.7902ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571491572,"nbf":1571489772,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"eFdqdElyMEpLWDVyMk14bHhKQWVwNWhYdG5NTHppdEZnRjhrNWVJWjBhbkNnN0pFVFIyWWJVWDk1dTYyaEhhOA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571489772}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.4086ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.6611ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.7768ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.0264ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TF:0000000F, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:0000000F, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:0000000F, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:0000000F, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:0000000F, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:0000000F, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571492209,"nbf":1571490409,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"UmlKcnJJekFRVDVwcE1uV0h1MTdadGNxUlFXaU5HdUkyQmg1eEZSZmxWWlAzVmdRWDI2b1V1UHR5VUt2cWFjQQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571490409}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.2443ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.4754ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      List of location for the user
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 5.0634ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.2953ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      aclIds is 232949,233494,233495,233662,233664,233667,233668,233923,234156,236153
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000001, previousRequestId: no previous request id, message: /api/locations is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000001, previousRequestId: no previous request id, message: /api/locations route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling Via Query Parameters.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 38.3656ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2225.7785ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/234156/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571492209,"nbf":1571490409,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"UmlKcnJJekFRVDVwcE1uV0h1MTdadGNxUlFXaU5HdUkyQmg1eEZSZmxWWlAzVmdRWDI2b1V1UHR5VUt2cWFjQQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571490409}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/234156/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/234156/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.0033ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.2657ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/234156/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/234156/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/234156/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.2822ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.4682ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233923/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000002, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000002, previousRequestId: no previous request id, message: /api/locations/234156/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571492209,"nbf":1571490409,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"UmlKcnJJekFRVDVwcE1uV0h1MTdadGNxUlFXaU5HdUkyQmg1eEZSZmxWWlAzVmdRWDI2b1V1UHR5VUt2cWFjQQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571490409}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000002, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/234156/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000002, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000002, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233923/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000002, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233923/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.5922ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 10.8175ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233923/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233923/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233923/R
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 35.5964ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233495/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571492209,"nbf":1571490409,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"UmlKcnJJekFRVDVwcE1uV0h1MTdadGNxUlFXaU5HdUkyQmg1eEZSZmxWWlAzVmdRWDI2b1V1UHR5VUt2cWFjQQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571490409}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.8136ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.9901ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233495/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233495/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TP:00000001, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TP:00000001, previousRequestId: no previous request id, message: /api/locations/233923/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TP:00000001, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233923/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TP:00000001, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TP:00000001, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TP:00000001, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.6221ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 10.8183ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233495/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233495/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233495/R
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 31.9553ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 5.6908ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.9236ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000003, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000003, previousRequestId: no previous request id, message: /api/locations/233495/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000003, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233495/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000003, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000003, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000003, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 32.4413ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/236153/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571492209,"nbf":1571490409,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"UmlKcnJJekFRVDVwcE1uV0h1MTdadGNxUlFXaU5HdUkyQmg1eEZSZmxWWlAzVmdRWDI2b1V1UHR5VUt2cWFjQQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571490409}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/236153/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/236153/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 10.9809ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.2112ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/236153/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/236153/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/236153/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.2079ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.4282ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000004, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000004, previousRequestId: no previous request id, message: /api/locations/236153/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000004, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/236153/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000004, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000004, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000004, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 35.7543ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/233668/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571492209,"nbf":1571490409,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"UmlKcnJJekFRVDVwcE1uV0h1MTdadGNxUlFXaU5HdUkyQmg1eEZSZmxWWlAzVmdRWDI2b1V1UHR5VUt2cWFjQQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571490409}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/233668/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/233668/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 15.3514ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 15.5933ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/233668/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233668/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/233668/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 5.2931ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.6191ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000005, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000005, previousRequestId: no previous request id, message: /api/locations/233668/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000005, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/233668/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000005, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000005, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000005, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 39.8447ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/devices/89742/schedules application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571492209,"nbf":1571490409,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"UmlKcnJJekFRVDVwcE1uV0h1MTdadGNxUlFXaU5HdUkyQmg1eEZSZmxWWlAzVmdRWDI2b1V1UHR5VUt2cWFjQQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571490409}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devices/89742/schedules
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devices/89742/schedules, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.6987ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 14.0353ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/devices/89742/schedules
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/3/89742/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/3/89742/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.7497ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.0084ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000006, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/devices/{everything}
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000006, previousRequestId: no previous request id, message: /api/devices/89742/schedules is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000006, previousRequestId: no previous request id, message: Client has been authenticated for /api/devices/89742/schedules
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000006, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000006, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000006, previousRequestId: no previous request id, message: /api/devices/{everything} route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 716.9902ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571491572,"nbf":1571489772,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"eFdqdElyMEpLWDVyMk14bHhKQWVwNWhYdG5NTHppdEZnRjhrNWVJWjBhbkNnN0pFVFIyWWJVWDk1dTYyaEhhOA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571489772}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.6153ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.9195ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.3335ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.5654ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000010, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000010, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000010, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000010, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000010, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000010, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2025.1464ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 PUT http://apigateway2.stage.resideo.com/api/devices/89742/control application/json; charset=utf-8 247
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571492209,"nbf":1571490409,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"UmlKcnJJekFRVDVwcE1uV0h1MTdadGNxUlFXaU5HdUkyQmg1eEZSZmxWWlAzVmdRWDI2b1V1UHR5VUt2cWFjQQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571490409}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/devices/89742/control
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/devices/89742/control, , PUT
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :3
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.5692ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.822ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/devices/89742/control
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/3/89742/E
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/3/89742/E
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.6201ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.8725ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000007, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/devices/{deviceId}/control
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000007, previousRequestId: no previous request id, message: /api/devices/89742/control is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000007, previousRequestId: no previous request id, message: Client has been authenticated for /api/devices/89742/control
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000007, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000007, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000007, previousRequestId: no previous request id, message: /api/devices/{deviceId}/control route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 366.2612ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571491572,"nbf":1571489772,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"eFdqdElyMEpLWDVyMk14bHhKQWVwNWhYdG5NTHppdEZnRjhrNWVJWjBhbkNnN0pFVFIyWWJVWDk1dTYyaEhhOA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571489772}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.0873ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.3415ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.7546ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.0169ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000011, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000011, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000011, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000011, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000011, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000011, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2107.7518ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571492209,"nbf":1571490409,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"UmlKcnJJekFRVDVwcE1uV0h1MTdadGNxUlFXaU5HdUkyQmg1eEZSZmxWWlAzVmdRWDI2b1V1UHR5VUt2cWFjQQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571490409}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.3019ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.6904ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.3199ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.546ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000008, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000008, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000008, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000008, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000008, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000008, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1814.1299ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571491572,"nbf":1571489772,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"eFdqdElyMEpLWDVyMk14bHhKQWVwNWhYdG5NTHppdEZnRjhrNWVJWjBhbkNnN0pFVFIyWWJVWDk1dTYyaEhhOA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571489772}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.0056ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.2957ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.045ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.3173ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000012, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000012, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000012, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000012, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000012, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000012, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1883.8238ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571492209,"nbf":1571490409,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"UmlKcnJJekFRVDVwcE1uV0h1MTdadGNxUlFXaU5HdUkyQmg1eEZSZmxWWlAzVmdRWDI2b1V1UHR5VUt2cWFjQQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571490409}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.7461ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 14.033ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 5.2502ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 5.5042ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000009, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000009, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000009, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000009, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000009, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:00000009, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2124.3477ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571491572,"nbf":1571489772,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"eFdqdElyMEpLWDVyMk14bHhKQWVwNWhYdG5NTHppdEZnRjhrNWVJWjBhbkNnN0pFVFIyWWJVWDk1dTYyaEhhOA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571489772}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.6208ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.8492ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.4125ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.6397ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000013, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000013, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000013, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000013, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000013, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000013, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1933.6759ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571492209,"nbf":1571490409,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"UmlKcnJJekFRVDVwcE1uV0h1MTdadGNxUlFXaU5HdUkyQmg1eEZSZmxWWlAzVmdRWDI2b1V1UHR5VUt2cWFjQQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571490409}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 13.6675ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 13.8972ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.0415ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.3395ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TO:0000000A, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:0000000A, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:0000000A, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:0000000A, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:0000000A, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:0000000A, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2034.9769ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/237214/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571491572,"nbf":1571489772,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"7e0436b5-39b4-4fe7-8885-2aef31314094","sub":"7e0436b5-39b4-4fe7-8885-2aef31314094","first_name":"P","last_name":"M","country":"US","upn":"7e0436b5-39b4-4fe7-8885-2aef31314094@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"eFdqdElyMEpLWDVyMk14bHhKQWVwNWhYdG5NTHppdEZnRjhrNWVJWjBhbkNnN0pFVFIyWWJVWDk1dTYyaEhhOA","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571489772}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/237214/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 12.7007ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 12.9446ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 154733
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :7e0436b5-39b4-4fe7-8885-2aef31314094
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/7e0436b5-39b4-4fe7-8885-2aef31314094/1/237214/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 4.282ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 4.503ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000014, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000014, previousRequestId: no previous request id, message: /api/locations/237214/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000014, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/237214/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000014, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000014, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TF:00000014, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 1925.9337ms 200 application/json; charset=utf-8
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[1]
      Request starting HTTP/1.1 GET http://apigateway2.stage.resideo.com/api/locations/232949/devices/info application/json; charset=utf-8 
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler[2]
      Successfully validated the token.
OnTokenValidated: {"typ":"JWT","alg":"RS256","kid":"3DXfsBsW57FY32620InQqKwdSdOoamusWRvWeAh_VZ4"}.{"iss":"https://lyricqastage.b2clogin.com/87df9e29-606d-43bf-9edb-5cc6e613ecbf/v2.0/","exp":1571492209,"nbf":1571490409,"aud":"0fe33ba8-bda7-4282-8da9-bb9e0e343a15","oid":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","sub":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1","first_name":"Resideo","last_name":"Honeywell","country":"US","upn":"8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1@lyricqastage.onmicrosoft.com","creationsource":"HHApp","language_code":"en-US","nonce":"UmlKcnJJekFRVDVwcE1uV0h1MTdadGNxUlFXaU5HdUkyQmg1eEZSZmxWWlAzVmdRWDI2b1V1UHR5VUt2cWFjQQ","scp":"user_impersonation","azp":"4b4f6b35-3897-4a20-bd8d-0b24ba651253","ver":"1.0","iat":1571490409}
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Check token validity.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthenticationValidationMiddleware[0]
      Token is validated.
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Handling for: /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : aud: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      isB2cAudience is: 0fe33ba8-bda7-4282-8da9-bb9e0e343a15
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : azp: 4b4f6b35-3897-4a20-bd8d-0b24ba651253
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Org Id is: 101
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Parameters are : /api/locations/232949/devices/info, , GET
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      authorizationConfigurations Length is :0
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      _configurationSection AuthorizationConfigurations Length is :36
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number ofauthorizationConfigurations :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Parameter.AuthorizationParameterFinder[0]
      Number of applicable Routes :2
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Services.HttpContextService[0]
      Claim Value is : oid: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      User Ref Id is: 8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/userId
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 11.6896ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 11.9229ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Titan User Id is: 153311
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      userReferenceIdheaderValue: 
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      If userReferenceIdheaderValue is empty then userrefId :8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Set RequestPathUrl in context /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[100]
      Start processing HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[100]
      Sending HTTP request GET http://titan-ufc-acsapi-service:8080/api/acs/101/8ae3b9ca-07b0-4a1a-bf7a-73464398f3a1/1/232949/R
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.ClientHandler[101]
      Received HTTP response after 3.3599ms - OK
[40m[32minfo[39m[22m[49m: System.Net.Http.HttpClient.IAccessControlService.LogicalHandler[101]
      End processing HTTP request after 3.5498ms - OK
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      checking hasAccessPermission from CheckAccess:Titan.UFC.APIGateway.ResultObject
[40m[32minfo[39m[22m[49m: Ocelot.RateLimit.Middleware.ClientRateLimitMiddleware[0]
      requestId: 0HLQKH9PMI3TO:0000000B, previousRequestId: no previous request id, message: EndpointRateLimiting is not enabled for /api/locations/{locationId}/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:0000000B, previousRequestId: no previous request id, message: /api/locations/232949/devices/info is an authenticated route. AuthenticationMiddleware checking if client is authenticated
[40m[32minfo[39m[22m[49m: Ocelot.Authentication.Middleware.AuthenticationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:0000000B, previousRequestId: no previous request id, message: Client has been authenticated for /api/locations/232949/devices/info
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:0000000B, previousRequestId: no previous request id, message: route is authenticated scopes must be checked
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:0000000B, previousRequestId: no previous request id, message: user scopes is authorised calling next authorisation checks
[40m[32minfo[39m[22m[49m: Ocelot.Authorisation.Middleware.AuthorisationMiddleware[0]
      requestId: 0HLQKH9PMI3TO:0000000B, previousRequestId: no previous request id, message: /api/locations/{locationId}/devices/info route does not require user to be authorised
[40m[32minfo[39m[22m[49m: Titan.UFC.APIGateway.Authorization.Middleware.AuthorizationMiddleware[0]
      Finished handling.
[40m[32minfo[39m[22m[49m: Microsoft.AspNetCore.Hosting.Internal.WebHost[2]
      Request finished in 2010.0448ms 200 application/json; charset=utf-8
